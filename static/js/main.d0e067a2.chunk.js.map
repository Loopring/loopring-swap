{"version":3,"sources":["lightcone/common/formatter.js","components/layout/toolbar/styled.js","components/layout/toolbar/index.jsx","components/layout/styled.js","components/layout/footer/styled.js","components/undecorated-link/index.jsx","components/layout/footer/index.jsx","components/layout/index.jsx","views/app/styled.js","env/index.js","components/drawer/styled.js","components/drawer/sections/lrc/index.jsx","components/drawer/sections/support/index.jsx","lightcone/api/localStorgeAPI.js","components/drawer/sections/technical-resources/index.jsx","components/drawer/sections/exchange-info/index.jsx","components/switch/index.jsx","components/drawer/sections/settings/styled.js","components/chip/styled.js","components/chip/index.jsx","components/drawer/sections/settings/index.jsx","components/spinner/index.jsx","components/button/index.jsx","components/drawer/index.jsx","lightcone/ethereum/contracts/AbiFunction.js","lightcone/ethereum/contracts/Contract.js","lightcone/ethereum/contracts/Contracts.js","lightcone/ethereum/contracts/index.js","lightcone/config/index.js","lightcone/sign/exchange.js","lightcone/common/utils.js","lightcone/common/request.js","lightcone/common/schemas.js","lightcone/common/validator.js","lightcone/ethereum/metaMask.js","lightcone/wallet/wallet.js","lightcone/wallet/index.js","lightcone/api/LightconeAPI.js","lightcone/api/v1/tokeninfo/get.js","lightcone/api/v1/balances/get.js","utils/loopring/index.js","lightcone/api/v1/depth/get.js","lightcone/api/v1/marketinfo/get.js","actions/loopring/index.js","views/swapper/styled.js","components/token-specifier/styled.js","components/token-icon/styled.js","components/token-icon/index.jsx","components/token-select/styled.js","components/token-select/index.jsx","components/token-modal/styled.js","components/full-screen-overlay/index.jsx","components/token-modal/index.jsx","components/token-specifier/index.jsx","views/swapper/index.jsx","actions/i18n/index.js","BrowserGlobalStyles.js","views/app/index.jsx","actions/web3/index.js","reducers/web3/index.js","reducers/loopring/index.js","reducers/i18n/index.js","reducers/index.js","index.js","lightcone/sign/poseidon.js","lightcone/sign/babyjub.js","images/logo.png","images/keep.png","images/nest.png","images/pnetwork.png","lightcone/sign/eddsa.js"],"names":["toBuffer","mixed","Buffer","ethUtil","zeroPad","num","places","String","padStart","toHex","BigNumber","BN","addHexPrefix","toString","RegExp","test","Error","toNumber","Number","toBig","toBN","fromGWEI","value","times","toFixed","toGWEI","div","formatKey","startsWith","slice","formatAddress","input","clearHexPrefix","padLeftEven","hex","length","getDisplaySymbol","settingsCurrency","number","precision","ceil","rm","Math","floor","config","EXPONENTIAL_AT","RANGE","ROUNDING_MODE","FlexContainer","styled","Flex","Logo","img","PointableIcon","FontAwesomeIcon","Toolbar","onDrawerOpenClick","height","src","logo","alignItems","ml","onClick","icon","faBars","Root","props","theme","background","text","Content","Box","UndecoratedLink","a","Footer","version","href","target","rel","faGithub","Layout","children","flexDirection","GlobalStyle","createGlobalStyle","shadow","warning","error","env","required","require","INFURA_URL","CHAIN_ID","parse","parseInt","DEX_SMART_CONTRACT_ADDRESS","RootFlex","open","HeaderFlex","SummaryMessage","span","EllipsizedBox","Icon","CloseIcon","ListItemHeader","textLight","ListItemBox","textInverted","primary","ListItemIcon","Lrc","mb","id","faMagnet","Support","faQuestionCircle","faTelegram","faDiscord","getLanguage","language","localStorage","getItem","shortLang","window","navigator","languages","userLanguage","indexOf","split","getLanguageFromBrowser","getEtherscanLink","chainId","lan","TechnicalResources","faFile","faPencilRuler","faRulerCombined","faCode","ExchangeInfo","faDollarSign","faClipboardCheck","faFileSignature","Switch","onChange","width","uncheckedIcon","checkedIcon","onColor","selectedTheme","offColor","checked","TextBox","border","selected","foreground","Chip","Settings","darkTheme","onDarkThemeChange","selectedLanguage","onSelectedLanguageChange","getLanguageChipClickHandler","px","justifyContent","mr","spin","keyframes","SpinningIcon","variant","textButton","size","Spinner","faCircleNotch","defaultProps","sizeMap","small","fontSize","medium","large","commonsStyles","css","disabled","textDisabled","StyledButton","button","Button","faIcon","loading","rest","display","Drawer","onClose","onConnectWallet","selectedWeb3Account","onLogin","onLogout","loggedIn","container","useRef","useState","faLock","setIcon","iconColor","setIconColor","summaryMessageKey","setSummaryMessageKey","buttonMessageKey","setButtonMessageKey","useLayoutEffect","faLockOpen","success","faPlug","handleButtonClick","useCallback","ref","minWidth","faTimes","color","textAlign","AbiFunction","inputs","name","outputs","constant","this","inputTypes","map","type","outputTypes","methodAbiHash","methodID","abiInputs","parseInputs","rawEncode","parseOutputs","rawDecode","encoded","undefined","output","Contract","abi","funAbi","filter","abiFunctions","reduce","acc","item","key","methodHash","method","abiFunction","encodeInputs","decodeOutputs","encode","methodId","decodeEncodedInputs","erc20Abi","exchangeAbi","contractWalletAbi","ERC20Token","ExchangeContract","ContractWallet","Contracts","getRelayerHost","restUrl","prodServerUrl","prodWsUrl","getTokenBySymbol","symbol","tokens","find","token","toLowerCase","getMarketByPair","pair","markets","m","market","getMarketsByTokenR","getServer","getWsServer","getTokenByAddress","address","getTokenByTokenId","tokenId","getGasLimitByType","txs","tx","getFeeByType","fees","fee","getChannelId","defaultChannelId","getLabel","label","isSupportedMarket","getTokenSupportedMarkets","leftMarket","getMarketsByTokenL","rightMarket","getMaxFeeBips","maxFeeBips","getMaxAmountInWEI","maxAmount","fromWEI","valueInWEI","precisionToFixed","decimals","toWEI","assert","generateKeyPair","seed","EdDSA","verify","publicKeyX","publicKeyY","keyPair","createAccountAndDeposit","from","exchangeAddress","publicX","publicY","amount","permission","nonce","gasPrice","toUpperCase","fm","data","ABI","pubKeyX","pubKeyY","tokenAddress","to","gas","err","console","deposit","plus","onChainWithdraw","signWithdrawal","_withdrawal","exchangeId","signature","withdrawal","feeToken","tokenF","amountInBN","tokenFId","amountFInBN","amountF","setupOffChainWithdrawal","hash","Poseidon","hasher","accountId","sign","secretKey","signOrder","_order","order","tokenBuy","tokenSell","tokenS","tokenB","tokenSId","tokenBId","amountSInBN","amountS","amountBInBN","amountB","buy","allOrNone","feeBips","rebateBips","setupOrder","orderId","validSince","validUntil","signatureRx","Rx","signatureRy","Ry","signatureS","s","signCancel","_cancel","cancel","orderToken","orderTokenId","setupCancel","signFlexCancel","request","uri","encodeURIComponent","params","clientOrderId","orderHash","encodedParams","message","sha256","signTransfer","transfer","tokenConf","tokenFConf","sender","receiver","encodeTransfer","JSON","stringify","hashPersonalMessage","SERVER_URL","options","timeout","baseURL","axios","then","response","resultInfo","errorData","errorMessage","parseResponse","schemas","STRING","URL","ADDRESS","pattern","HEX","ETH_DATA","TX_HASH","RPC_TAG","enum","TX","fields","signed","handleErrors","errors","msgs","join","validate","payload","onError","onSuccess","source","schema","validator","Schema","web3","account","Promise","resolve","eth","result","errorMsg","substring","r","v","personalSign","msg","personal","ecRecover","sig","contractWalletValidate","contractWalletValidate2","walletValid2","log","_data","_signature","call","valid","signEthereumTx","rawTx","ethTx","Transaction","getChainId","Object","assign","serialize","sendTransaction","transactionHash","Wallet","walletType","keyMessage","transferMessage","sendByMetaMask","_spender","_value","keyNonce","exchange","channelId","owner","signedTransfer","ecdsaSig","countTrailingZeroes","numString","numZeroes","reverse","digit","getApiKey","headers","url","submitOrderToLightcone","apiKey","getOrderId","lightconeGetAccount","mapAmountInUI","baseToken","amountInUI","parseFloat","amountInDecimals","numTrailingZeroes","dropedZeroes","endsWith","dropTrailingZeroes","getExchangeInfo","getTokenInfo","updatedTokens","disableDelistedTokens","formatter","delistedTokens","i","j","includes","push","getBalances","skip","limit","balances","configTokens","updatedBalances","balance","updatedBalance","totalAmount","totalAmountInString","frozenAmount","frozenAmountInString","percentage","dividedBy","availableInBigNumber","minus","available","availableInAssetPanel","getLoopringApiKey","wallet","getDepth","level","depth","bids","arr","arrToDepth","updatedBids","aggregatedBidSize","bid","updatedBid","price","aggregatedSize","volume","count","sizeInNumber","asks","updatedAsks","aggregateAskSize","ask","updatedAsk","getMarketInfo","updatedMarkets","removeDelistedMarkets","delistedMarkets","isDelisted","getUserBalances","supportedTokens","dispatch","partialBalances","allBalances","supportedToken","enabled","supportedTokenId","supportedTokenSymbol","matchingBalance","sort","b","toast","BackgroundFlex","ArrowIcon","SlippageText","FeeTextBox","PointableBox","HeaderText","Input","placeholder","StyledImage","TokenIcon","alt","keepLogo","nestLogo","pNetworkLogo","getIconSource","ChevronIcon","TokenSelect","faChevronDown","ContentFlex","ListFlex","SearchFlex","RowFlex","EmptyIcon","EmptyTextBox","SecondaryTextBox","FullScreenOverlay","fromWei","Web3","utils","TokenModal","onRefresh","formatMessage","useIntl","contentRef","searchTerm","setSearchTerm","tokenDataset","setTokenDataset","balancesInEther","setBalancesInEther","useEffect","dataset","lowerCasedSearchTerm","firstAddress","secondAddress","firstTokenBalance","secondTokenBalance","getClickHandler","handleLocalClose","setTimeout","handleLocalCloseOnOutsideClick","event","current","contains","handleSearchTermChange","mt","faSearch","flex","p","faSync","py","currentlySelected","pl","pr","isGreaterThan","decimalPlaces","my","faExclamationTriangle","TokenSpecifier","onAmountChange","onBalancesRefresh","onTokenChange","loadingSupportedTokens","loadingBalances","modalOpen","setModalOpen","stringAmount","setStringAmount","rollingCommaStringAmount","weiAmount","exchangeBalance","tokenMaximumExchangeBalance","handleAmountChange","newAmount","numericAmount","properNumericValue","isNaN","userTokenBalance","isLessThan","toWei","handleSelectClick","handleModalClose","handleTokenChange","Swapper","onConnectWalletClick","useDispatch","useSelector","state","loopringAccount","loopring","loopringExchange","loopringWallet","loadings","supportedMarkets","swapData","swap","loadingSwapData","loadingSwapSubmission","swapSubmission","fromToken","setFromToken","fromAmount","setFromAmount","toToken","setToToken","toAmount","setToAmount","filteredToTokens","setFilteredToTokens","compatibleMarkets","setCompatibleMarkets","changingToAmount","setChangingToAmount","changingFromAmount","setChangingFromAmount","changingToToken","setChangingToToken","changingFromToken","setChangingFromToken","selling","setSelling","useDebouncedCallback","quoteToken","bestPrice","orders","estimatedToAmount","multipliedBy","requiredOrders","totalOrdersSize","isGreaterThanOrEqualTo","averageFillPrice","pricesSum","slippagePercentage","negated","maximumAmount","totalSize","getSwapData","debouncedGetSwapData","quoteTokenId","baseTokenId","tradedMarket","referenceAmount","partialAmount","adjustedFromAmount","handleFromTokenChange","handleFromAmountChange","handleToTokenChange","handleToAmountChange","handleSwap","Date","getTime","signedOrder","submitOrder","postSwap","handleBalancesRefresh","handleSwitchSwapAttributes","faArrowDown","faExchangeAlt","switchLanguage","BrowserGlobalStyles","moment","locale","momentIt","localizedMessages","en","it","commonColors","light","dark","lightWeb3ModalTheme","main","secondary","hover","darkWeb3ModalTheme","web3ModalOptions","cacheProvider","providerOptions","mewconnect","package","MewConnect","infuraId","getWeb3Modal","Web3Modal","App","i18n","web3Instance","instance","selectedAccount","lightTheme","setLightTheme","drawerOpen","setDrawerOpen","filteredSupportedTokens","accumulator","getSupportedTokens","cachedLanguage","handleDrawerOpenClick","handleDrawerClose","handleConnectWallet","web3Modal","connect","provider","on","accounts","autoRefreshOnNetworkChange","getAccounts","handleLogin","warn","login","handleLogout","handleOverlayClick","handleThemeChange","newLightTheme","textTheme","setItem","handleSelectedLanguageChange","messages","className","toastClassName","bodyClassName","position","closeButton","transition","Slide","initialState","reducers","combineReducers","action","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById","F","bn128","Fr","SEED","getPseudoRandom","n","res","h","blake2b","update","digest","affine","bigInt","leBuff2int","allDifferent","isZero","equals","ark","c","add","sigma","mul","square","mix","M","newState","Array","zero","createHash","t","nRoundsF","nRoundsP","C","nRounds","NROUNDSF","getConstants","cmatrix","inverse","sub","getMatrix","Base8","subOrder","shr","addPoint","q","cta","d","mulPointEscalar","base","e","rem","exp","isOdd","inCurve","P","x2","y2","one","inSubgroup","exports","packPoint","buff","leInt2Buff","greater","unpackPoint","_buff","greaterOrEquals","x","sqrt","neg","module","mod","babyJub","publicKey","strKey","prv","h1","createBlakeHash","msgBuff","rBuff","concat","A","R8","hm","S","pubKey","R","Pleft","Pright","generatePubKeyFromPrivate"],"mappings":"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","file":"static/js/main.d0e067a2.chunk.js","sourcesContent":["import * as ethUtil from \"ethereumjs-util\";\nimport BN from \"bn.js\";\nimport BigNumber from \"bignumber.js\";\n\nBigNumber.config({\n  EXPONENTIAL_AT: 20,\n  RANGE: [-100000, 10000000],\n  ROUNDING_MODE: 1,\n});\n\n/**\n *\n * @param mixed Buffer|number|string (hex string must be with '0x' prefix)\n * @returns {Buffer}\n */\nexport function toBuffer(mixed) {\n  if (mixed instanceof Buffer) {\n    return mixed;\n  } else {\n    return ethUtil.toBuffer(mixed);\n  }\n}\n\n/**\n *\n * @param num number|string (hex string must be with '0x' prefix)\n * @param places number of zeros to pad\n * @returns {Buffer}\n */\nexport function zeroPad(num, places) {\n  return toBuffer(String(num).padStart(places, \"0\"));\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {string}\n */\nexport function toHex(mixed) {\n  if (\n    typeof mixed === \"number\" ||\n    mixed instanceof BigNumber ||\n    mixed instanceof BN\n  ) {\n    return addHexPrefix(mixed.toString(16));\n  }\n\n  if (mixed instanceof Buffer) {\n    return addHexPrefix(mixed.toString(\"hex\"));\n  }\n\n  if (typeof mixed === \"string\") {\n    const regex = new RegExp(/^0x[0-9a-fA-F]*$/);\n    return regex.test(mixed)\n      ? mixed\n      : addHexPrefix(toBuffer(mixed).toString(\"hex\"));\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {number}\n */\nexport function toNumber(mixed) {\n  if (typeof mixed === \"number\") {\n    return mixed;\n  }\n\n  if (mixed instanceof BigNumber || mixed instanceof BN) {\n    return mixed.toNumber();\n  }\n\n  if (typeof mixed === \"string\") {\n    return Number(mixed);\n  }\n\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {BigNumber}\n */\nexport function toBig(mixed) {\n  if (mixed instanceof BigNumber) {\n    return mixed;\n  }\n\n  if (typeof mixed === \"number\") {\n    return new BigNumber(mixed.toString());\n  }\n\n  if (typeof mixed === \"string\") {\n    return new BigNumber(mixed);\n  }\n\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {BN}\n */\nexport function toBN(mixed) {\n  return mixed instanceof BN ? mixed : new BN(toBig(mixed).toString(10), 10);\n}\n\n/**\n *\n * @param value number | BigNumber | Buffer | string\n * @returns {BN}\n */\nexport function fromGWEI(value) {\n  return new BigNumber(toBig(value).times(1e9).toFixed(0));\n}\n\n/**\n *\n * @param value number | BigNumber | Buffer | string\n * @returns {BN}\n */\nexport function toGWEI(value) {\n  return toBig(value).div(1e9);\n}\n\n/**\n * Returns formatted hex string of a given private key\n * @param mixed Buffer| string\n * @returns {string}\n */\nexport function formatKey(mixed) {\n  if (mixed instanceof Buffer) {\n    return mixed.toString(\"hex\");\n  }\n\n  if (typeof mixed === \"string\") {\n    return mixed.startsWith(\"0x\") ? mixed.slice(2) : mixed;\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n * Returns hex string of a given address\n * @param mixed Buffer | string\n * @returns {string}\n */\nexport function formatAddress(mixed) {\n  if (mixed instanceof Buffer) {\n    return ethUtil.toChecksumAddress(\"0x\" + mixed.toString(\"hex\"));\n  }\n\n  if (typeof mixed === \"string\") {\n    return ethUtil.toChecksumAddress(\n      mixed.startsWith(\"0x\") ? mixed : \"0x\" + mixed\n    );\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n * Returns hex string with '0x' prefix\n * @param input\n * @returns {string}\n */\nexport function addHexPrefix(input) {\n  if (typeof input === \"string\") {\n    return input.startsWith(\"0x\") ? input : \"0x\" + input;\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n * Returns hex string without '0x' prefix\n * @param input string\n * @returns {string}\n */\nexport function clearHexPrefix(input) {\n  if (typeof input === \"string\") {\n    return input.startsWith(\"0x\") ? input.slice(2) : input;\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param hex\n * @returns {string}\n */\nexport function padLeftEven(hex) {\n  return hex.length % 2 !== 0 ? `0${hex}` : hex;\n}\n\n/**\n * Returns symbol of a given kind of currency\n * @param settingsCurrency\n * @returns {*}\n */\nexport function getDisplaySymbol(settingsCurrency) {\n  switch (settingsCurrency) {\n    case \"CNY\":\n      return \"\";\n    case \"USD\":\n      return \"$\";\n    default:\n      return \"\";\n  }\n}\n\n/**\n * Returns number in string with a given precision\n * @param number number | BigNumber\n * @param precision number\n * @param ceil bool  round up\n * @returns {string}\n */\nexport function toFixed(number, precision, ceil) {\n  precision = precision || 0;\n  if (number instanceof BigNumber) {\n    const rm = ceil ? 0 : 1;\n    return number.toFixed(precision, rm);\n  }\n\n  if (typeof number === \"number\") {\n    return ceil\n      ? (\n          Math.ceil(number * Number(\"1e\" + precision)) /\n          Number(\"1e\" + precision)\n        ).toFixed(precision)\n      : (\n          Math.floor(number * Number(\"1e\" + precision)) /\n          Number(\"1e\" + precision)\n        ).toFixed(precision);\n  }\n\n  throw new Error(\"Unsupported type\");\n}\n","import styled from \"styled-components\";\nimport { Flex } from \"reflexbox\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport const FlexContainer = styled(Flex)`\n    padding-left: 20px;\n    padding-right: 20px;\n    width: 100%;\n    height: 60px;\n    align-items: center;\n    justify-content: space-between;\n`;\n\nexport const Logo = styled.img`\n    height: 100%;\n`;\n\nexport const PointableIcon = styled(FontAwesomeIcon)`\n    font-size: 24px;\n    cursor: pointer;\n`;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FlexContainer, Logo, PointableIcon } from \"./styled\";\nimport { Box, Flex } from \"reflexbox\";\nimport logo from \"../../../images/logo.png\";\nimport { faBars } from \"@fortawesome/free-solid-svg-icons\";\n\nexport const Toolbar = ({ onDrawerOpenClick }) => (\n    <FlexContainer>\n        <Box height={36}>\n            <Logo src={logo} />\n        </Box>\n        <Flex alignItems=\"center\" height=\"100%\">\n            <Box ml={3} onClick={onDrawerOpenClick}>\n                <PointableIcon icon={faBars} />\n            </Box>\n        </Flex>\n    </FlexContainer>\n);\n\nToolbar.propTypes = {\n    onDrawerOpenClick: PropTypes.func.isRequired,\n};\n","import styled from \"styled-components\";\nimport { Flex, Box } from \"reflexbox\";\n\nexport const Root = styled(Flex)`\n    background: ${(props) => props.theme.background};\n    color: ${(props) => props.theme.text};\n    transition: background 0.3s ease, color 0.3s ease;\n    width: 100%;\n    height: 100%;\n`;\n\nexport const Content = styled(Box)`\n    width: 100%;\n    height: 100%;\n    padding: 24px 0px;\n`;\n","import styled from \"styled-components\";\nimport { Flex } from \"reflexbox\";\n\nexport const FlexContainer = styled(Flex)`\n    padding-left: 20px;\n    padding-right: 20px;\n    width: 100%;\n    height: 32px;\n    align-items: center;\n    justify-content: center;\n    font-size: 12px;\n`;\n","import styled from \"styled-components\";\n\nexport const UndecoratedLink = styled.a`\n    text-decoration: none;\n    color: inherit;\n`;\n","import React from \"react\";\nimport { FlexContainer } from \"./styled\";\nimport { Box } from \"reflexbox\";\nimport { version } from \"../../../../package.json\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faEthereum, faGithub } from \"@fortawesome/free-brands-svg-icons\";\nimport { UndecoratedLink } from \"../../undecorated-link\";\n\nexport const Footer = () => (\n    <div>\n    <FlexContainer>\n            Powered by Ethereum & Loopring &middot;\n           - {version} &middot;{\" \"}\n            <UndecoratedLink\n                href=\"https://github.com/luzzif/loopring-swap\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                <FontAwesomeIcon icon={faGithub} />\n            </UndecoratedLink>\n\n    </FlexContainer>\n    <FlexContainer>\n     Source code not audited by Loopring. Use it at your own risk!\n    </FlexContainer>\n    </div>\n);","import React from \"react\";\nimport { Toolbar } from \"./toolbar\";\nimport PropTypes from \"prop-types\";\nimport { Root, Content } from \"./styled\";\nimport { Footer } from \"./footer\";\n\nexport const Layout = ({ children, onDrawerOpenClick }) => (\n    <Root flexDirection=\"column\">\n        <Toolbar onDrawerOpenClick={onDrawerOpenClick} />\n        <Content>{children}</Content>\n        <Footer />\n    </Root>\n);\n\nLayout.propTypes = {\n    children: PropTypes.node.isRequired,\n    onDrawerOpenClick: PropTypes.func.isRequired,\n};\n","import { createGlobalStyle } from \"styled-components\";\n\nexport const GlobalStyle = createGlobalStyle`\n    html {\n        height: 100%;\n        font-family: Montserrat, sans-serif;;\n    }\n\n    body {\n        margin: 0;\n        height: 100%;\n    }\n\n    #root {\n        height: 100%;\n    }\n\n    .custom-toast-root {\n        width: auto !important;\n    }\n\n    @media (max-width: 600px) {\n        .custom-toast-root {\n            left: 16px !important;\n            right: 16px !important;\n        }\n    }\n\n    .custom-toast-container {\n        margin-top: 16px !important;\n        box-shadow: 0px 30px 62px 0px ${(props) =>\n            props.theme.shadow} !important;\n        border-radius: 12px !important;\n    }\n\n    .custom-toast-body {\n        font-size: 16px;\n        margin: 0;\n        padding: 4px 12px;\n    }\n\n    .Toastify__toast {\n        min-height: 0;\n        font-family: Montserrat, sans-serif;;\n    }\n\n    .Toastify__toast--warning {\n        background: ${(props) => props.theme.warning} !important;\n    }\n\n    .Toastify__toast--error {\n        background: ${(props) => props.theme.error} !important;\n    }\n\n    .web3modal-provider-container,\n    .web3modal-modal-card {\n        border-radius: 12px !important;\n    }\n`;\n","import env from \"@mondora/env\";\n\nconst NODE_ENV = env(\"NODE_ENV\", { required: true });\nif (NODE_ENV !== \"production\") {\n    require(\"dotenv\").config();\n}\n\nexport const INFURA_URL = env(\"REACT_APP_INFURA_URL\", {\n    required: true,\n});\n\nexport const CHAIN_ID = env(\"REACT_APP_CHAIN_ID\", {\n    required: true,\n    parse: parseInt,\n});\n\nexport const LOOPRING_API_HOST = `${\n    CHAIN_ID === 1 ? \"api\" : \"uat\"\n}.loopring.io`;\n\nexport const DEX_SMART_CONTRACT_ADDRESS = env(\n    \"REACT_APP_DEX_SMART_CONTRACT_ADDRESS\",\n    { required: true }\n);\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Flex, Box } from \"reflexbox\";\nimport styled from \"styled-components\";\n\nexport const RootFlex = styled(Flex)`\n    width: 272px;\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    transition: transform 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;\n    transform: translateX(${(props) => (props.open ? \"0\" : \"150%\")});\n    background: ${(props) => props.theme.background};\n    box-shadow: 0px 30px 62px 0px ${(props) => props.theme.shadow};\n    overflow-y: auto;\n`;\n\nexport const HeaderFlex = styled(Flex)`\n    width: 100%;\n    height: 60px;\n    min-height: 60px;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px 16px;\n    font-size: 20px;\n    font-weight: 700;\n    color: ${(props) => props.theme.text};\n    transition: color 0.3s ease;\n`;\n\nexport const SummaryMessage = styled.span`\n    font-size: 13px;\n    color: ${(props) => props.theme.text};\n    transition: color 0.3s ease;\n`;\n\nexport const EllipsizedBox = styled(Box)`\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n`;\n\nexport const Icon = styled(FontAwesomeIcon)`\n    font-size: 40px;\n`;\n\nexport const CloseIcon = styled(FontAwesomeIcon)`\n    cursor: pointer;\n`;\n\nexport const ListItemHeader = styled(Box)`\n    display: flex;\n    align-items: center;\n    width: 100%;\n    padding: 0 20px;\n    font-size: 16px;\n    font-weight: 600;\n    color: ${(props) => props.theme.textLight};\n    margin-bottom: 16px;\n    transition: color 0.3s ease;\n`;\n\nexport const ListItemBox = styled(Box)`\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    width: 100%;\n    padding: 0 20px;\n    min-height: 44px;\n    height: 44px;\n    font-size: 13px;\n    color: ${(props) => props.theme.text};\n    background: ${(props) => props.theme.background};\n    :hover {\n        color: ${(props) => props.theme.textInverted};\n        background: ${(props) => props.theme.primary};\n    }\n    transition: color 0.3s ease, background 0.3s ease;\n`;\n\nexport const ListItemIcon = styled(FontAwesomeIcon)`\n    margin-right: 8px;\n`;\n","import React from \"react\";\nimport { ListItemHeader, ListItemBox, ListItemIcon } from \"../../styled\";\nimport { FormattedMessage } from \"react-intl\";\nimport { faMagnet } from \"@fortawesome/free-solid-svg-icons\";\nimport { UndecoratedLink } from \"../../../undecorated-link\";\n\nexport const Lrc = () => {\n    return (\n        <>\n            <ListItemHeader mb={2}>\n                <FormattedMessage id=\"drawer.wallet.connect.list.header.lrc\" />\n            </ListItemHeader>\n            <UndecoratedLink\n                href=\"https://staking.loopring.org\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                <ListItemBox>\n                    <ListItemIcon icon={faMagnet} />{\" \"}\n                    <FormattedMessage id=\"drawer.wallet.connect.list.item.staking\" />\n                </ListItemBox>\n            </UndecoratedLink>\n        </>\n    );\n};\n","import React from \"react\";\nimport { ListItemHeader, ListItemBox, ListItemIcon } from \"../../styled\";\nimport { FormattedMessage } from \"react-intl\";\nimport { faQuestionCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { faTelegram, faDiscord } from \"@fortawesome/free-brands-svg-icons\";\nimport { UndecoratedLink } from \"../../../undecorated-link\";\n\nexport const Support = () => {\n    return (\n        <>\n            <ListItemHeader mb={2}>\n                <FormattedMessage id=\"drawer.wallet.connect.list.header.support\" />\n            </ListItemHeader>\n            <UndecoratedLink\n                href=\"https://medium.com/loopring-protocol/loopring-exchange-faq-196d6c40f6cf\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                <ListItemBox>\n                    <ListItemIcon icon={faQuestionCircle} />{\" \"}\n                    <FormattedMessage id=\"drawer.wallet.connect.list.item.faq\" />\n                </ListItemBox>\n            </UndecoratedLink>\n            <UndecoratedLink\n                href=\"https://t.me/loopring_en\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                <ListItemBox>\n                    <ListItemIcon icon={faTelegram} />{\" \"}\n                    <FormattedMessage id=\"drawer.wallet.connect.list.item.telegram\" />\n                </ListItemBox>\n            </UndecoratedLink>\n            <UndecoratedLink\n                href=\"https://discordapp.com/invite/KkYccYp\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                <ListItemBox>\n                    <ListItemIcon icon={faDiscord} />{\" \"}\n                    <FormattedMessage id=\"drawer.wallet.connect.list.item.discord\" />\n                </ListItemBox>\n            </UndecoratedLink>\n            <UndecoratedLink\n                href=\"https://github.com/Loopring/dexwebapp/issues/new\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                <ListItemBox>\n                    <ListItemIcon icon={faQuestionCircle} />{\" \"}\n                    <FormattedMessage id=\"drawer.wallet.connect.list.item.bug.report\" />\n                </ListItemBox>\n            </UndecoratedLink>\n        </>\n    );\n};\n","function getAccounts() {\n  const accountStr = localStorage.getItem(\"accounts\");\n  return accountStr ? new Map(JSON.parse(accountStr)) : new Map();\n}\n\nconst SESSION_TIMEOUT_MINUTES = 60;\n\nexport function getAccountFromLocal(address) {\n  const now = Date.now();\n  const accounts = getAccounts();\n  const account = accounts.get(address.toLowerCase());\n\n  // If it's unknown wallet type, remove\n  const unknownWalletType = !(\n    account &&\n    account.walletType &&\n    (account.walletType === \"MetaMask\" ||\n      account.walletType === \"WalletConnect\")\n  );\n  if (\n    !account ||\n    !account.time ||\n    now >= account.time + SESSION_TIMEOUT_MINUTES * 60 * 1000 ||\n    unknownWalletType\n  ) {\n    removeAccountFromLocal(address);\n    removeAccountKeyFromSession(address);\n    return null;\n  } else {\n    delete account.time;\n    account.accountKey = getAccountKeyFromSession(address);\n    account.keyNonce = account.keyNonce ? account.keyNonce : 0;\n    delete account.accountKeyCipher;\n    return account;\n  }\n}\n\nexport function saveAccountToLocal(account) {\n  try {\n    const localAccount = { ...account };\n    const accounts = getAccounts();\n    saveAccountKeyToSession(localAccount.address, localAccount.accountKey);\n    delete localAccount.accountKey;\n    delete localAccount.accountKeyCipher;\n\n    accounts.set(localAccount.address.toLowerCase(), {\n      ...localAccount,\n      time: Date.now(),\n    });\n    localStorage.setItem(\"accounts\", JSON.stringify([...accounts]));\n  } catch (e) {}\n}\n\nexport function removeAccountFromLocal(address) {\n  if (address) {\n    const accounts = getAccounts();\n    // Convert address to lower case\n    accounts.delete(address.toLowerCase());\n    localStorage.setItem(\"accounts\", JSON.stringify([...accounts]));\n    removeAccountKeyFromSession(address);\n  }\n}\n\nexport function getAccountKeys() {\n  const keyStr = sessionStorage.getItem(\"accountKeys\");\n  return keyStr ? new Map(JSON.parse(keyStr)) : new Map();\n}\n\nexport function saveAccountKeyToSession(address, accountKey) {\n  try {\n    const keys = getAccountKeys();\n    keys.set(address.toLowerCase(), {\n      accountKey,\n      time: Date.now(),\n    });\n    sessionStorage.setItem(\"accountKeys\", JSON.stringify([...keys]));\n  } catch (e) {}\n}\n\nexport function removeAccountKeyFromSession(address) {\n  if (address) {\n    const keys = getAccountKeys();\n    keys.delete(address.toLowerCase());\n    sessionStorage.setItem(\"accountKeys\", JSON.stringify([...keys]));\n  }\n}\n\nexport function getAccountKeyFromSession(address) {\n  const now = Date.now();\n  const keys = getAccountKeys();\n  const key = keys.get(address.toLowerCase());\n\n  if (\n    !key ||\n    !key.time ||\n    now >= key.time + SESSION_TIMEOUT_MINUTES * 60 * 1000\n  ) {\n    removeAccountKeyFromSession(address);\n    return null;\n  } else {\n    return key.accountKey;\n  }\n}\n\nexport function saveShowAllOpenOrders() {\n  localStorage.setItem(\"showAllOpenOrders\", \"true\");\n}\n\nexport function getShowAllOpenOrders() {\n  return localStorage.getItem(\"showAllOpenOrders\");\n}\n\nexport function removeShowAllOpenOrders() {\n  localStorage.removeItem(\"showAllOpenOrders\");\n}\n\nexport function saveHideLowBalanceAssets() {\n  localStorage.setItem(\"hideLowBalanceAssets\", \"true\");\n}\n\nexport function getHideLowBalanceAssets() {\n  return localStorage.getItem(\"hideLowBalanceAssets\");\n}\n\nexport function removeHideLowBalanceAssets() {\n  localStorage.removeItem(\"hideLowBalanceAssets\");\n}\n\nexport function saveWalletType(walletType) {\n  localStorage.setItem(\"walletType\", walletType);\n}\n\nexport function getWalletType() {\n  return localStorage.getItem(\"walletType\");\n}\n\nexport function removeWalletType() {\n  localStorage.removeItem(\"walletType\");\n}\n\nexport function saveLoginRecord() {\n  localStorage.setItem(\"hasRecord\", \"true\");\n}\n\nexport function getLoginRecord() {\n  return localStorage.getItem(\"hasRecord\");\n}\n\nexport function removeLoginRecord() {\n  localStorage.removeItem(\"hasRecord\");\n}\n\nfunction getUpdateRecords() {\n  const recordStr = localStorage.getItem(\"updateRecords\");\n  return recordStr ? new Map(JSON.parse(recordStr)) : new Map();\n}\n\nexport function getUpdateRecordByAddress(address) {\n  const records = getUpdateRecords();\n  return records.get(address.toLowerCase());\n}\n\nexport function saveUpdateRecord(record) {\n  const records = getUpdateRecords();\n  records.set(record.address.toLowerCase(), record);\n  localStorage.setItem(\"updateRecords\", JSON.stringify([...records]));\n}\n\nexport function removeUpdateRecord(address) {\n  const records = getUpdateRecords();\n  records.delete(address.toLowerCase());\n  localStorage.setItem(\"updateRecords\", JSON.stringify([...records]));\n}\n\nexport function saveLanguage(value) {\n  if (value === \"en\" || value === \"zh\") {\n    localStorage.setItem(\"language\", value);\n  }\n}\n\nexport function getLanguage() {\n  let language = localStorage.getItem(\"language\") || getLanguageFromBrowser();\n  if (language === \"zh\") {\n    language = \"zh\";\n  } else {\n    language = \"en\";\n  }\n  return language;\n}\n\nexport function saveCurrency(value) {\n  if (value === \"USD\" || value === \"CNY\") {\n    localStorage.setItem(\"currency\", value);\n  }\n}\n\nexport function getCurrency() {\n  let currency = localStorage.getItem(\"currency\");\n  if (currency === \"USD\" || currency === \"CNY\") {\n    return currency;\n  } else {\n    return getLanguage() === \"zh\" ? \"CNY\" : \"USD\";\n  }\n}\n\nexport function saveLastTradePage(lastTradePage) {\n  localStorage.setItem(\"lastTradePage\", lastTradePage);\n}\n\nexport function getLastTradePage() {\n  const lastTradePage = localStorage.getItem(\"lastTradePage\");\n  if (lastTradePage) {\n    return lastTradePage;\n  } else {\n    return \"LRC-USDT\";\n  }\n}\n\nexport function saveLastOrderPage(lastOrderPage) {\n  localStorage.setItem(\"lastOrderPage\", lastOrderPage);\n}\n\nexport function getLastOrderPage() {\n  const lastOrderPage = localStorage.getItem(\"lastOrderPage\");\n  if (lastOrderPage) {\n    return lastOrderPage;\n  } else {\n    return \"open-orders\";\n  }\n}\n\nexport function saveLastAccountPage(lastAccountPage) {\n  localStorage.setItem(\"lastAccountPage\", lastAccountPage);\n}\n\nexport function getLastAccountPage() {\n  const lastAccountPage = localStorage.getItem(\"lastAccountPage\");\n  if (lastAccountPage) {\n    return lastAccountPage;\n  } else {\n    return \"balances\";\n  }\n}\n\nexport function saveThemeName(themeName) {\n  localStorage.setItem(\"theme\", themeName);\n}\n\nexport function getReferralId() {\n  const reg = new RegExp(\"^([1-9][0-9]{0,6})$\");\n  const str = localStorage.getItem(\"referral\");\n  if (str && !Number.isNaN(str) && reg.test(str)) {\n    return str;\n  } else return null;\n}\n\nexport function setReferralId(id) {\n  localStorage.setItem(\"referral\", id);\n}\n\nexport function removeReferralId() {\n  localStorage.removeItem(\"referral\");\n}\n\nexport function getThemeName() {\n  const themeName = localStorage.getItem(\"theme\");\n  if (themeName !== \"dark\" && themeName !== \"light\") {\n    return \"auto\";\n  } else return themeName;\n}\n\nfunction getLanguageFromBrowser() {\n  var language =\n    (window.navigator.languages && window.navigator.languages[0]) || // Chrome / Firefox\n    window.navigator.language || // All browsers\n    window.navigator.userLanguage; // IE <= 10\n  let shortLang = language;\n  if (shortLang.indexOf(\"-\") !== -1) {\n    shortLang = shortLang.split(\"-\")[0];\n  } else if (shortLang.indexOf(\"_\") !== -1) {\n    shortLang = shortLang.split(\"_\")[0];\n  }\n  return shortLang;\n}\n\nexport function getEtherscanLink(chainId) {\n  const lan = getLanguage();\n\n  switch (chainId) {\n    case 1:\n      if (lan === \"zh\") {\n        return \"https://cn.etherscan.com\";\n      } else {\n        return \"https://etherscan.io\";\n      }\n    case 5:\n      return \"https://goerli.etherscan.io\";\n    default:\n      return \"\";\n  }\n}\n","import React from \"react\";\nimport { ListItemHeader, ListItemBox, ListItemIcon } from \"../../styled\";\nimport { FormattedMessage } from \"react-intl\";\nimport {\n    faFile,\n    faPencilRuler,\n    faRulerCombined,\n    faCode,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { UndecoratedLink } from \"../../../undecorated-link\";\nimport { getEtherscanLink } from \"../../../../lightcone/api/localStorgeAPI\";\nimport { CHAIN_ID, DEX_SMART_CONTRACT_ADDRESS } from \"../../../../env\";\n\nexport const TechnicalResources = () => {\n    return (\n        <>\n            <ListItemHeader mb={2}>\n                <FormattedMessage id=\"drawer.wallet.connect.list.header.technical.resources\" />\n            </ListItemHeader>\n            <UndecoratedLink\n                href=\"https://docs.loopring.io/en/\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                <ListItemBox>\n                    <ListItemIcon icon={faFile} />{\" \"}\n                    <FormattedMessage id=\"drawer.wallet.connect.list.item.exchange.api\" />\n                </ListItemBox>\n            </UndecoratedLink>\n            <UndecoratedLink\n                href={`${getEtherscanLink(\n                    CHAIN_ID\n                )}/address/${DEX_SMART_CONTRACT_ADDRESS}`}\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                <ListItemBox>\n                    <ListItemIcon icon={faPencilRuler} />{\" \"}\n                    <FormattedMessage id=\"drawer.wallet.connect.list.item.smart.contract\" />\n                </ListItemBox>\n            </UndecoratedLink>\n            <UndecoratedLink\n                href=\"https://loopring.org\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                <ListItemBox>\n                    <ListItemIcon icon={faRulerCombined} />{\" \"}\n                    <FormattedMessage id=\"drawer.wallet.connect.list.item.loopring.protocol\" />\n                </ListItemBox>\n            </UndecoratedLink>\n            <UndecoratedLink\n                href=\"https://github.com/luzzif/loopring-swap\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                <ListItemBox>\n                    <ListItemIcon icon={faCode} />{\" \"}\n                    <FormattedMessage id=\"drawer.wallet.connect.list.item.source.code\" />\n                </ListItemBox>\n            </UndecoratedLink>\n        </>\n    );\n};\n","import React from \"react\";\nimport { ListItemHeader, ListItemBox, ListItemIcon } from \"../../styled\";\nimport { FormattedMessage } from \"react-intl\";\nimport {\n    faDollarSign,\n    faClipboardCheck,\n    faFileSignature,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { UndecoratedLink } from \"../../../undecorated-link\";\n\nexport const ExchangeInfo = () => {\n    return (\n        <>\n            <ListItemHeader mb={2}>\n                <FormattedMessage id=\"drawer.wallet.connect.list.header.exchange.info\" />\n            </ListItemHeader>\n            <UndecoratedLink\n                href=\"https://loopring.io/document/fees\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                <ListItemBox>\n                    <ListItemIcon icon={faDollarSign} />{\" \"}\n                    <FormattedMessage id=\"drawer.wallet.connect.list.item.fee.schedule\" />\n                </ListItemBox>\n            </UndecoratedLink>\n            <UndecoratedLink\n                href=\"https://loopringexchange.typeform.com/to/nWXj6B\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                <ListItemBox>\n                    <ListItemIcon icon={faClipboardCheck} />{\" \"}\n                    <FormattedMessage id=\"drawer.wallet.connect.list.item.token.listing\" />\n                </ListItemBox>\n            </UndecoratedLink>\n            <UndecoratedLink\n                href=\"https://loopring.io/legal/terms\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                <ListItemBox>\n                    <ListItemIcon icon={faFileSignature} />{\" \"}\n                    <FormattedMessage id=\"drawer.wallet.connect.list.item.terms.privacy\" />\n                </ListItemBox>\n            </UndecoratedLink>\n        </>\n    );\n};\n","import React from \"react\";\nimport ReactSwitch from \"react-switch\";\nimport { selectedTheme } from \"../../views/app\";\n\nexport const Switch = ({ value, onChange }) => {\n    return (\n        <ReactSwitch\n            height={16}\n            width={32}\n            uncheckedIcon={false}\n            checkedIcon={false}\n            onColor={selectedTheme.primary}\n            offColor=\"#5A6872\"\n            onChange={onChange}\n            checked={value}\n        />\n    );\n};\n","import styled from \"styled-components\";\nimport { Box } from \"reflexbox\";\n\nexport const TextBox = styled(Box)`\n    color: ${(props) => props.theme.text};\n    transition: color 0.3s ease;\n    display: flex;\n    align-items: center;\n`;\n","import styled from \"styled-components\";\nimport { Flex } from \"reflexbox\";\n\nexport const RootFlex = styled(Flex)`\n    border: solid 1px ${(props) => props.theme.border};\n    border-radius: 12px;\n    padding: 4px 8px;\n    font-size: 16px;\n    line-height: 16px;\n    background: ${(props) =>\n        props.selected ? props.theme.primary : props.theme.foreground};\n    color: ${(props) =>\n        props.selected ? props.theme.textInverted : props.theme.text};\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    transition: background 0.3s ease, border 0.3s ease, color 0.3s ease;\n    cursor: pointer;\n`;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { RootFlex } from \"./styled\";\n\nexport const Chip = ({ selected, onClick, children }) => (\n    <RootFlex alignItems=\"center\" onClick={onClick} selected={selected}>\n        {children}\n    </RootFlex>\n);\n\nChip.propTypes = {\n    children: PropTypes.node.isRequired,\n    selected: PropTypes.bool.isRequired,\n    onClick: PropTypes.func.isRequired,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ListItemHeader } from \"../../styled\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Flex, Box } from \"reflexbox\";\nimport { Switch } from \"../../../switch\";\nimport { TextBox } from \"./styled\";\nimport { Chip } from \"../../../chip\";\n\nexport const Settings = ({\n    darkTheme,\n    onDarkThemeChange,\n    selectedLanguage,\n    onSelectedLanguageChange,\n}) => {\n    const getLanguageChipClickHandler = (language) => () => {\n        onSelectedLanguageChange(language);\n    };\n\n    return (\n        <>\n            <ListItemHeader mb={3}>\n                <FormattedMessage id=\"drawer.wallet.connect.list.header.settings\" />\n            </ListItemHeader>\n            <Flex px=\"20px\" width=\"100%\" justifyContent=\"space-between\" mb={3}>\n                <TextBox>\n                    <FormattedMessage id=\"drawer.wallet.connect.list.settings.theme.dark\" />\n                </TextBox>\n                <Box>\n                    <Switch value={darkTheme} onChange={onDarkThemeChange} />\n                </Box>\n            </Flex>\n            <Flex px=\"20px\" width=\"100%\" justifyContent=\"space-between\" mb={2}>\n                <TextBox>\n                    <FormattedMessage id=\"drawer.wallet.connect.list.settings.language\" />\n                </TextBox>\n                <Flex alignItems=\"center\">\n                    <Box mr={2}>\n                        <Chip\n                            selected={selectedLanguage === \"it\"}\n                            onClick={getLanguageChipClickHandler(\"it\")}\n                        >\n                            IT\n                        </Chip>\n                    </Box>\n                    <Box>\n                        <Chip\n                            selected={selectedLanguage === \"en\"}\n                            onClick={getLanguageChipClickHandler(\"en\")}\n                        >\n                            EN\n                        </Chip>\n                    </Box>\n                </Flex>\n            </Flex>\n        </>\n    );\n};\n\nSettings.propTypes = {\n    darkTheme: PropTypes.bool.isRequired,\n    onDarkThemeChange: PropTypes.func.isRequired,\n    selectedLanguage: PropTypes.string.isRequired,\n    onSelectedLanguageChange: PropTypes.func.isRequired,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled, { keyframes } from \"styled-components\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCircleNotch } from \"@fortawesome/free-solid-svg-icons\";\n\nconst spin = keyframes`\n    0% {\n        transform: rotate(0deg);\n    }\n    100% {\n        transform: rotate(360deg);\n    }\n`;\n\nexport const SpinningIcon = styled(FontAwesomeIcon)`\n    color: ${(props) => {\n        if (props.variant === \"primary\") {\n            return props.theme.primary;\n        } else if (props.variant === \"buttonText\") {\n            return props.theme.textButton;\n        }\n    }};\n    animation: ${spin} 1s linear 0s infinite;\n    font-size: ${(props) => props.size}px;\n`;\n\nexport const Spinner = ({ size, variant }) => {\n    return <SpinningIcon size={size} variant={variant} icon={faCircleNotch} />;\n};\n\nSpinner.propTypes = {\n    size: PropTypes.number.isRequired,\n    variant: PropTypes.oneOf([\"primary\", \"buttonText\"]),\n};\n\nSpinner.defaultProps = {\n    variant: \"primary\",\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled, { css } from \"styled-components\";\nimport { Flex, Box } from \"reflexbox\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Spinner } from \"../spinner\";\n\nconst sizeMap = {\n    small: {\n        height: 32,\n        fontSize: 12,\n    },\n    medium: {\n        height: 36,\n        fontSize: 16,\n    },\n    large: {\n        height: 48,\n        fontSize: 16,\n    },\n};\n\nconst commonsStyles = css`\n    display: flex;\n    white-space: nowrap;\n    justify-content: center;\n    align-items: center;\n    height: ${(props) => sizeMap[props.size].height}px;\n    padding: 0 20px;\n    font-size: ${(props) => sizeMap[props.size].fontSize}px;\n    font-family: Montserrat, sans-serif;\n    background: ${(props) =>\n        props.disabled ? props.theme.disabled : props.theme.primary};\n    color: ${(props) =>\n        props.disabled ? props.theme.textDisabled : props.theme.textButton};\n    border: none;\n    border-radius: 12px;\n    font-weight: 600;\n    transition: all 0.3s ease;\n    outline: none;\n    cursor: ${(props) => (props.disabled ? \"not-allowed\" : \"pointer\")};\n    text-decoration: none;\n`;\n\nconst StyledButton = styled.button`\n    ${commonsStyles}\n`;\n\nexport const Button = ({\n    children,\n    faIcon,\n    size,\n    loading,\n    disabled,\n    ...rest\n}) => (\n    <StyledButton size={size} disabled={disabled} {...rest}>\n        <Flex>\n            {loading && !disabled ? (\n                <Box\n                    width=\"100%\"\n                    display=\"flex\"\n                    alignItems=\"center\"\n                    justifyContent=\"center\"\n                >\n                    <Spinner\n                        size={sizeMap[size].fontSize}\n                        variant=\"buttonText\"\n                    />\n                </Box>\n            ) : (\n                <>\n                    {faIcon && (\n                        <Box mr={2}>\n                            <FontAwesomeIcon icon={faIcon} />\n                        </Box>\n                    )}\n                    <Box>{children}</Box>\n                </>\n            )}\n        </Flex>\n    </StyledButton>\n);\n\nButton.propTypes = {\n    faIcon: PropTypes.object,\n    size: PropTypes.oneOf([\"small\", \"medium\", \"large\"]),\n    loading: PropTypes.bool,\n    disabled: PropTypes.bool,\n};\n\nButton.defaultProps = {\n    size: \"medium\",\n};\n","import React, { useRef, useState, useLayoutEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Box } from \"reflexbox\";\nimport {\n    faPlug,\n    faLock,\n    faLockOpen,\n    faTimes,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { selectedTheme } from \"../../views/app\";\nimport { FormattedMessage } from \"react-intl\";\nimport {\n    RootFlex,\n    HeaderFlex,\n    Icon,\n    EllipsizedBox,\n    CloseIcon,\n    SummaryMessage,\n} from \"./styled\";\nimport { Lrc } from \"./sections/lrc\";\nimport { Support } from \"./sections/support\";\nimport { TechnicalResources } from \"./sections/technical-resources\";\nimport { ExchangeInfo } from \"./sections/exchange-info\";\nimport { Settings } from \"./sections/settings\";\nimport { Button } from \"../button\";\nimport { useCallback } from \"react\";\n\nexport const Drawer = ({\n    open,\n    onClose,\n    onConnectWallet,\n    selectedWeb3Account,\n    onLogin,\n    onLogout,\n    loggedIn,\n    darkTheme,\n    onDarkThemeChange,\n    selectedLanguage,\n    onSelectedLanguageChange,\n}) => {\n    const container = useRef(null);\n\n    const [icon, setIcon] = useState(faLock);\n    const [iconColor, setIconColor] = useState(\"\");\n    const [summaryMessageKey, setSummaryMessageKey] = useState(\"placeholder\");\n    const [buttonMessageKey, setButtonMessageKey] = useState(\"placeholder\");\n\n    useLayoutEffect(() => {\n        if (loggedIn) {\n            setIcon(faLockOpen);\n            setIconColor(selectedTheme.success);\n            setSummaryMessageKey(\"drawer.wallet.connect.logout\");\n            setButtonMessageKey(\"drawer.wallet.connect.action.logout\");\n        } else if (selectedWeb3Account) {\n            setIcon(faLock);\n            setIconColor(selectedTheme.error);\n            setSummaryMessageKey(\"drawer.wallet.connect.login\");\n            setButtonMessageKey(\"drawer.wallet.connect.action.login\");\n        } else {\n            setIcon(faPlug);\n            setIconColor(selectedTheme.primary);\n            setSummaryMessageKey(\"drawer.wallet.connect.summary\");\n            setButtonMessageKey(\"drawer.wallet.connect.action.connect\");\n        }\n    }, [loggedIn, selectedWeb3Account]);\n\n    const handleButtonClick = useCallback(() => {\n        if (loggedIn) {\n            onLogout();\n        } else if (selectedWeb3Account) {\n            onLogin();\n        } else {\n            onConnectWallet();\n        }\n    }, [loggedIn, onConnectWallet, onLogin, onLogout, selectedWeb3Account]);\n\n    return (\n        <RootFlex\n            flexDirection=\"column\"\n            alignItems=\"center\"\n            open={open}\n            ref={container}\n        >\n            <HeaderFlex mb={3}>\n                <EllipsizedBox>\n                    {selectedWeb3Account || (\n                        <FormattedMessage id=\"drawer.wallet.connect.header.connect\" />\n                    )}\n                </EllipsizedBox>\n                <Box ml={3} minWidth=\"auto\">\n                    <CloseIcon icon={faTimes} onClick={onClose} />\n                </Box>\n            </HeaderFlex>\n            <Box mb={3}>\n                <Icon icon={icon} color={iconColor} fontSize=\"40\" />\n            </Box>\n            <Box px={4} mb={3} fontSize=\"12px\" textAlign=\"center\">\n                <SummaryMessage>\n                    <FormattedMessage id={summaryMessageKey} />\n                </SummaryMessage>\n            </Box>\n            <Box px={4} mb={4}>\n                <Button onClick={handleButtonClick}>\n                    <FormattedMessage id={buttonMessageKey} />\n                </Button>\n            </Box>\n            <Box width=\"100%\" mb={2}>\n                <Settings\n                    darkTheme={darkTheme}\n                    onDarkThemeChange={onDarkThemeChange}\n                    selectedLanguage={selectedLanguage}\n                    onSelectedLanguageChange={onSelectedLanguageChange}\n                />\n            </Box>\n            <Box width=\"100%\" mb={2}>\n                <Lrc />\n            </Box>\n            <Box width=\"100%\" mb={2}>\n                <Support />\n            </Box>\n            <Box width=\"100%\" mb={2}>\n                <TechnicalResources />\n            </Box>\n            <Box width=\"100%\" mb={2}>\n                <ExchangeInfo />\n            </Box>\n        </RootFlex>\n    );\n};\n\nDrawer.propTypes = {\n    open: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onConnectWallet: PropTypes.func.isRequired,\n    selectedWeb3Account: PropTypes.string,\n    onLogin: PropTypes.func.isRequired,\n    onLogout: PropTypes.func.isRequired,\n    loggedIn: PropTypes.bool.isRequired,\n    darkTheme: PropTypes.bool.isRequired,\n    onDarkThemeChange: PropTypes.func.isRequired,\n    selectedLanguage: PropTypes.string.isRequired,\n    onSelectedLanguageChange: PropTypes.func.isRequired,\n};\n","import {\n  addHexPrefix,\n  clearHexPrefix,\n  toBuffer,\n  toHex,\n} from \"../../common/formatter\";\nimport { methodID, rawDecode, rawEncode } from \"ethereumjs-abi\";\nimport BN from \"bn.js\";\n\nexport default class AbiFunction {\n  constructor({ inputs, name, outputs, constant }) {\n    this.name = name;\n    this.inputTypes = inputs.map(({ type }) => type);\n    this.inputs = inputs;\n    this.outputTypes = outputs.map(({ type }) => type);\n    this.outputs = outputs;\n    this.constant = constant;\n    this.methodAbiHash = toHex(methodID(name, this.inputTypes));\n  }\n\n  /**\n   * @description Returns encoded methodId and inputs\n   * @param inputs Object, examples {owner:\"0x000...}\n   * @returns {string}\n   */\n  encodeInputs(inputs) {\n    const abiInputs = this.parseInputs(inputs);\n    return (\n      this.methodAbiHash +\n      clearHexPrefix(toHex(rawEncode(this.inputTypes, abiInputs)))\n    );\n  }\n\n  /**\n   * @description decode ethereum jsonrpc response result\n   * @param outputs\n   * @returns {*}\n   */\n  decodeOutputs(outputs) {\n    return this.parseOutputs(rawDecode(this.outputTypes, toBuffer(outputs)));\n  }\n\n  /**\n   * @description decode encoded inputs\n   * @param encoded\n   * @returns {*}\n   */\n  decodeEncodedInputs(encoded) {\n    return this.parseOutputs(\n      rawDecode(this.inputTypes, toBuffer(addHexPrefix(encoded)))\n    );\n  }\n\n  parseInputs(inputs = {}) {\n    return this.inputs.map(({ name, type }) => {\n      if (inputs[name] === undefined) {\n        throw new Error(`Parameter ${name} of type ${type} is required!`);\n      }\n      return inputs[name];\n    });\n  }\n\n  parseOutputs(outputs) {\n    return outputs.map((output) => {\n      if (output instanceof BN) {\n        return toHex(output);\n      }\n      return output;\n    });\n  }\n}\n","import { methodID } from \"ethereumjs-abi\";\nimport { toHex } from \"../../common/formatter\";\nimport AbiFunction from \"./AbiFunction\";\n\nexport default class Contract {\n  constructor(abi) {\n    const funAbi = abi.filter(({ type }) => type === \"function\");\n    this.abiFunctions = funAbi.reduce((acc, item) => {\n      const inputTypes = item.inputs.map(({ type }) => type);\n      const key = `${item.name}(${inputTypes.toString()})`;\n      const methodHash = methodID(item.name, inputTypes);\n      return {\n        ...acc,\n        [item.name]: new AbiFunction(item),\n        [key]: new AbiFunction(item),\n        [methodHash]: new AbiFunction(item),\n      };\n    }, {});\n  }\n\n  /**\n   * @description Encodes inputs data according to  ethereum abi\n   * @param method string can be full method or just method name, examples: 'balanceOf' or balanceOf(address)\n   * @param inputs array\n   * @returns {*|string}\n   */\n  encodeInputs(method, inputs) {\n    const abiFunction = this.abiFunctions[method];\n    if (abiFunction) {\n      return abiFunction.encodeInputs(inputs);\n    } else {\n      throw new Error(`No  ${method} method according to abi `);\n    }\n  }\n\n  /**\n   * @description Decodes outputs\n   * @param method string can be full method or just method name, examples: 'balanceOf' or balanceOf(address)\n   * @param outputs string\n   * @returns {*}\n   */\n  decodeOutputs(method, outputs) {\n    const abiFunction = this.abiFunctions[method];\n    if (abiFunction) {\n      return abiFunction.decodeOutputs(outputs);\n    } else {\n      throw new Error(`No  ${method} method according to abi `);\n    }\n  }\n\n  /**\n   * @description Decode encoded method and inputs\n   * @param encode string | Buffer\n   * @returns {*}\n   */\n  decodeEncodeInputs(encode) {\n    encode = toHex(encode);\n    const methodId = encode.slice(0, 10);\n    const abiFunction = this.abiFunctions[methodId];\n    if (abiFunction) {\n      return abiFunction.decodeEncodedInputs(encode.slice(10));\n    } else {\n      throw new Error(`No corresponding method according to abi `);\n    }\n  }\n}\n","import Contract from \"./Contract\";\n\nconst erc20Abi = require(\"../../config/abis/erc20.json\");\nconst exchangeAbi = require(\"../../config/abis/exchange.json\");\nconst contractWalletAbi = require(\"../../config/abis/contractWallet.json\");\n\nconst ERC20Token = new Contract(erc20Abi);\nconst ExchangeContract = new Contract(exchangeAbi);\nconst ContractWallet = new Contract(contractWalletAbi);\n\nexport default {\n  ERC20Token,\n  ExchangeContract,\n  ContractWallet,\n};\n","import AbiFunction from \"./AbiFunction\";\nimport Contract from \"./Contract\";\nimport Contracts from \"./Contracts\";\n\nexport default {\n  AbiFunction,\n  Contract,\n  Contracts,\n};\n","import { toBig, toFixed } from \"../common/formatter\";\nconst config = require(\"./config.json\");\n\nfunction getRelayerHost(restUrl = true) {\n  return restUrl ? config.prodServerUrl : config.prodWsUrl;\n}\n\nfunction getServer() {\n  return \"https://\" + getRelayerHost();\n}\n\nfunction getWsServer() {\n  return \"wss://\" + getRelayerHost(false) + \"/v2/ws\";\n}\n\nfunction getChannelId() {\n  return config.defaultChannelId;\n}\n\nfunction getLabel() {\n  return config.label;\n}\n\nfunction getMaxFeeBips() {\n  return config.maxFeeBips;\n}\n\nfunction getTokenBySymbol(symbol, tokens) {\n  if (typeof symbol === \"undefined\") {\n    return {};\n  }\n  return (\n    tokens.find(\n      (token) => token.symbol.toLowerCase() === symbol.toLowerCase()\n    ) || {}\n  );\n}\n\nfunction getTokenByAddress(address, tokens) {\n  if (typeof address === \"undefined\") {\n    return {};\n  }\n  return tokens.find(\n    (token) => token.address.toLowerCase() === address.toLowerCase()\n  );\n}\n\nfunction getTokenByTokenId(tokenId, tokens) {\n  if (typeof tokenId === \"undefined\") {\n    return {};\n  }\n  return tokens.find((token) => token.tokenId === tokenId);\n}\n\nfunction fromWEI(symbol, valueInWEI, tokens, { precision, ceil } = {}) {\n  const token = getTokenBySymbol(symbol, tokens);\n  const precisionToFixed = precision ? precision : token.precision;\n  const value = toBig(valueInWEI).div(\"1e\" + token.decimals);\n  return toFixed(value, precisionToFixed, ceil);\n}\n\nfunction toWEI(symbol, value, tokens) {\n  const token = getTokenBySymbol(symbol, tokens);\n  if (typeof token === \"undefined\") {\n    return 0;\n  }\n  return toBig(value)\n    .times(\"1e\" + token.decimals)\n    .toFixed(0);\n}\n\nfunction getMarketByPair(pair, markets) {\n  if (pair) {\n    return markets.find((m) => m.market === pair);\n  }\n}\n\nfunction isSupportedMarket(market, markets) {\n  return !!getMarketByPair(market, markets);\n}\n\nfunction getMarketsByTokenR(token, markets) {\n  return markets.filter((item) => item.split(\"-\")[1] === token);\n}\n\nfunction getMarketsByTokenL(token, markets) {\n  return markets.filter((item) => item.split(\"-\")[0] === token);\n}\n\nfunction getTokenSupportedMarkets(token) {\n  const leftMarket = getMarketsByTokenL(token);\n  const rightMarket = getMarketsByTokenR(token);\n  return [...leftMarket, ...rightMarket];\n}\n\nfunction getGasLimitByType(type) {\n  if (type) {\n    return config.txs.find((tx) => type === tx.type);\n  }\n}\n\nfunction getFeeByType(type, fees) {\n  if (type) {\n    return fees.find((fee) => type === fee.type);\n  }\n}\n\nfunction getMaxAmountInWEI() {\n  return config.maxAmount;\n}\n\nexport default {\n  getRelayerHost,\n  getServer,\n  getWsServer,\n  getTokenBySymbol,\n  getTokenByAddress,\n  getTokenByTokenId,\n  getMarketByPair,\n  getGasLimitByType,\n  getFeeByType,\n  getChannelId,\n  getLabel,\n  isSupportedMarket,\n  getMarketsByTokenR,\n  getTokenSupportedMarkets,\n  getMaxFeeBips,\n  getMaxAmountInWEI,\n  fromWEI,\n  toWEI,\n};\n","import * as Poseidon from \"./poseidon\";\nimport * as fm from \"../common/formatter\";\nimport ABI from \"../ethereum/contracts\";\nimport EdDSA from \"./eddsa\";\nimport config from \"../config\";\nimport sha256 from \"crypto-js/sha256\";\n\nconst assert = require(\"assert\");\n\nexport function generateKeyPair(seed) {\n  return EdDSA.generateKeyPair(seed);\n}\n\nexport function verify(publicKeyX, publicKeyY, seed) {\n  const keyPair = generateKeyPair(seed);\n  return keyPair.publicKeyX === publicKeyX && keyPair.publicKeyY === publicKeyY;\n}\n\nexport function signGetApiKey(request, keyPair) {\n  if (request.signature !== undefined) {\n    return;\n  }\n\n  const method = \"GET\";\n  const uri = encodeURIComponent(`${config.getServer()}/api/v2/apiKey`);\n  const params = encodeURIComponent(\n    `accountId=${request.accountId}&publicKeyX=${keyPair.publicKeyX}&publicKeyY=${keyPair.publicKeyY}`\n  );\n  const message = `${method}&${uri}&${params}`;\n  const hash = fm.addHexPrefix(sha256(message).toString());\n  // Create signature\n  request.signature = EdDSA.sign(keyPair.secretKey, hash);\n\n  return request;\n}\n\nexport function signApplyApiKey(request, keyPair) {\n  if (request.signature !== undefined) {\n    return;\n  }\n\n  const method = \"POST\";\n  const uri = encodeURIComponent(`${config.getServer()}/api/v2/apiKey`);\n  const params = encodeURIComponent(\n    JSON.stringify({\n      accountId: request.accountId,\n      publicKeyX: keyPair.publicKeyX,\n      publicKeyY: keyPair.publicKeyY,\n    })\n  );\n  const message = `${method}&${uri}&${params}`;\n  const hash = fm.addHexPrefix(sha256(message).toString());\n  // Create signature\n  request.signature = EdDSA.sign(keyPair.secretKey, hash);\n  return request;\n}\n\nexport function signSetReferrer(request, keyPair) {\n  if (request.signature !== undefined) {\n    return;\n  }\n\n  const method = \"POST\";\n  const uri = encodeURIComponent(`${config.getServer()}/api/v2/refer`);\n\n  let params;\n\n  if (request.referrer) {\n    params = encodeURIComponent(\n      JSON.stringify({\n        address: request.address,\n        referrer: request.referrer,\n        publicKeyX: keyPair.publicKeyX,\n        publicKeyY: keyPair.publicKeyY,\n      })\n    );\n  } else {\n    params = encodeURIComponent(\n      JSON.stringify({\n        address: request.address,\n        promotionCode: request.promotionCode,\n        publicKeyX: keyPair.publicKeyX,\n        publicKeyY: keyPair.publicKeyY,\n      })\n    );\n  }\n\n  const message = `${method}&${uri}&${params}`;\n  const hash = fm.addHexPrefix(sha256(message).toString());\n  // Create signature\n  return EdDSA.sign(keyPair.secretKey, hash);\n}\n\nexport function signUpdateDistributeHash(request, keyPair) {\n    const method = 'POST';\n    const uri = encodeURIComponent(`${config.getServer()}/api/v2/updateDistributeHash`);\n    const params = encodeURIComponent(\n        JSON.stringify({\n            re: request.requestId,\n            txHash: request.txHash,\n            publicKeyX: keyPair.publicKeyX,\n            publicKeyY: keyPair.publicKeyY,\n        })\n    );\n    const message = `${method}&${uri}&${params}`;\n    const hash = fm.addHexPrefix(sha256(message).toString());\n    // Create signature\n    return EdDSA.sign(keyPair.secretKey, hash);\n}\n\n\nexport function createAccountAndDeposit({\n  from,\n  exchangeAddress,\n  fee,\n  chainId,\n  publicX,\n  publicY,\n  token,\n  amount,\n  permission,\n  nonce,\n  gasPrice,\n}) {\n  try {\n    let address, value;\n    if (token.symbol.toUpperCase() === \"ETH\") {\n      address = \"0x0\";\n      value = \"0\";\n    } else {\n      address = token.address;\n      value = fm.toHex(fm.toBig(amount).times(\"1e\" + token.decimals));\n    }\n\n    const data = ABI.Contracts.ExchangeContract.encodeInputs(\n      \"updateAccountAndDeposit\",\n      {\n        pubKeyX: fm.toHex(fm.toBN(publicX)),\n        pubKeyY: fm.toHex(fm.toBN(publicY)),\n        tokenAddress: address,\n        amount: value,\n        permission: fm.toBuffer(permission),\n      }\n    );\n\n    return {\n      from: from,\n      to: exchangeAddress,\n      value: fm.toBig(fee).toFixed(),\n      data: data,\n      chainId: chainId,\n      nonce: nonce.toString(),\n      gasPrice: fm.fromGWEI(gasPrice).toFixed(),\n      gas: config.getGasLimitByType(\"create\").gas.toString(),\n    };\n  } catch (err) {\n    console.error(\"Failed in method createOrUpdateAccount. Error: \", err);\n    throw err;\n  }\n}\n\nexport function deposit({\n  from,\n  exchangeAddress,\n  chainId,\n  token,\n  fee,\n  amount,\n  nonce,\n  gasPrice,\n}) {\n  let value, data;\n  try {\n    value = fm.toBig(amount).times(\"1e\" + token.decimals);\n    if (token.symbol.toUpperCase() === \"ETH\") {\n      data = ABI.Contracts.ExchangeContract.encodeInputs(\"deposit\", {\n        tokenAddress: \"0x0\",\n        amount: fm.toHex(value),\n      });\n      value = value.plus(fee);\n    } else {\n      data = ABI.Contracts.ExchangeContract.encodeInputs(\"deposit\", {\n        tokenAddress: token.address,\n        amount: fm.toHex(value),\n      });\n      value = fm.toBig(fee);\n    }\n\n    return {\n      from: from,\n      to: exchangeAddress,\n      value: value.toFixed(),\n      data: data,\n      chainId: chainId,\n      nonce: nonce.toString(),\n      gasPrice: fm.fromGWEI(gasPrice).toFixed(),\n      gas: config.getGasLimitByType(\"depositTo\").gas.toString(),\n    };\n  } catch (err) {\n    console.error(\"Failed in method deposit. Error: \", err);\n    throw err;\n  }\n}\n\nexport function onChainWithdraw({\n  from,\n  exchangeAddress,\n  chainId,\n  token,\n  amount,\n  nonce,\n  gasPrice,\n  fee,\n}) {\n  let to, value, data;\n  try {\n    value = fm.toBig(amount).times(\"1e\" + token.decimals);\n    to = token.symbol.toUpperCase() === \"ETH\" ? \"0x0\" : token.address;\n    data = ABI.Contracts.ExchangeContract.encodeInputs(\"withdraw\", {\n      tokenAddress: to,\n      amount: fm.toHex(value),\n    });\n    value = fm.toBig(fee);\n\n    return {\n      from: from,\n      to: exchangeAddress,\n      value: value.toFixed(),\n      data: data,\n      chainId: chainId,\n      nonce: nonce.toString(),\n      gasPrice: fm.fromGWEI(gasPrice).toFixed(),\n      gas: config.getGasLimitByType(\"withdraw\").gas.toString(),\n    };\n  } catch (err) {\n    console.error(\"Failed in method withdraw. Error: \", err);\n    throw err;\n  }\n}\n\nfunction setupOffChainWithdrawal(withdrawal, tokens) {\n  let token, feeToken;\n  if (!withdrawal.token.startsWith(\"0x\")) {\n    token = config.getTokenBySymbol(withdrawal.token, tokens);\n  } else {\n    token = config.getTokenByAddress(withdrawal.token, tokens);\n  }\n  if (!withdrawal.tokenF.startsWith(\"0x\")) {\n    feeToken = config.getTokenBySymbol(withdrawal.tokenF, tokens);\n  } else {\n    feeToken = config.getTokenByAddress(withdrawal.tokenF, tokens);\n  }\n  withdrawal.tokenId = token.id;\n  withdrawal.token = token.address;\n  withdrawal.amountInBN = config.toWEI(token.symbol, withdrawal.amount, tokens);\n  withdrawal.amount = withdrawal.amountInBN;\n\n  withdrawal.tokenFId = feeToken.id;\n  withdrawal.tokenF = feeToken.address;\n  withdrawal.amountFInBN = config.toWEI(\n    feeToken.symbol,\n    withdrawal.amountF,\n    tokens\n  );\n  withdrawal.amountF = withdrawal.amountFInBN;\n\n  withdrawal.label =\n    withdrawal.label !== undefined ? withdrawal.label : config.getLabel();\n  return withdrawal;\n}\n\nexport function signWithdrawal(_withdrawal, keyPair, exchangeId, tokens) {\n  if (_withdrawal.signature !== undefined) {\n    return;\n  }\n\n  const withdrawal = setupOffChainWithdrawal(_withdrawal, tokens);\n  const hasher = Poseidon.createHash(9, 6, 53);\n\n  // Calculate hash\n  const inputs = [\n    exchangeId,\n    withdrawal.accountId,\n    withdrawal.tokenId,\n    withdrawal.amountInBN,\n    withdrawal.tokenFId,\n    withdrawal.amountFInBN,\n    withdrawal.label,\n    withdrawal.nonce,\n  ];\n  const hash = hasher(inputs).toString(10);\n\n  // Create signature\n  withdrawal.hash = hash;\n  withdrawal.signature = EdDSA.sign(keyPair.secretKey, hash);\n\n  /**\n  // Verify signature\n  const success = EdDSA.verify(hash, withdrawal.signature, [\n    keyPair.publicKeyX,\n    keyPair.publicKeyY\n  ]);\n  assert(success, 'Failed to verify signature');\n  */\n  return withdrawal;\n}\n\nexport function signOrder(_order, keyPair, tokens) {\n  if (_order.signature !== undefined) {\n    return;\n  }\n\n  const order = setupOrder(_order, tokens);\n  const hasher = Poseidon.createHash(14, 6, 53);\n\n  // Calculate hash\n  const inputs = [\n    order.exchangeId,\n    order.orderId,\n    order.accountId,\n    order.tokenSId,\n    order.tokenBId,\n    order.amountSInBN,\n    order.amountBInBN,\n    order.allOrNone ? 1 : 0,\n    order.validSince,\n    order.validUntil,\n    order.maxFeeBips,\n    order.buy ? 1 : 0,\n    order.label,\n  ];\n\n  order.hash = hasher(inputs).toString(10);\n\n  // Create signature\n  const signature = EdDSA.sign(keyPair.secretKey, order.hash);\n  order.signature = signature;\n  order.signatureRx = signature.Rx;\n  order.signatureRy = signature.Ry;\n  order.signatureS = signature.s;\n\n  /**\n  // Verify signature\n  const success = EdDSA.verify(order.hash, order.signature, [\n    keyPair.publicKeyX,\n    keyPair.publicKeyY\n  ]);\n  assert(success, 'Failed to verify signature');\n   */\n  return order;\n}\n\nfunction setupOrder(order, tokens) {\n  let tokenBuy, tokenSell;\n  if (!order.tokenS.startsWith(\"0x\")) {\n    tokenSell = config.getTokenBySymbol(order.tokenS, tokens);\n  } else {\n    tokenSell = config.getTokenByAddress(order.tokenS, tokens);\n  }\n  if (!order.tokenB.startsWith(\"0x\")) {\n    tokenBuy = config.getTokenBySymbol(order.tokenB, tokens);\n  } else {\n    tokenBuy = config.getTokenByAddress(order.tokenB, tokens);\n  }\n  order.tokenS = tokenSell.address;\n  order.tokenB = tokenBuy.address;\n  order.tokenSId = tokenSell.tokenId;\n  order.tokenBId = tokenBuy.tokenId;\n\n  order.amountSInBN = config.toWEI(tokenSell.symbol, order.amountS, tokens);\n  order.amountS = order.amountSInBN;\n\n  order.amountBInBN = config.toWEI(tokenBuy.symbol, order.amountB, tokens);\n  order.amountB = order.amountBInBN;\n\n  order.buy = order.buy !== undefined ? !!order.buy : false;\n\n  order.maxFeeBips =\n    order.maxFeeBips !== undefined ? order.maxFeeBips : config.getMaxFeeBips();\n  order.allOrNone = order.allOrNone !== undefined ? !!order.allOrNone : false;\n\n  order.feeBips =\n    order.feeBips !== undefined ? order.feeBips : order.maxFeeBips;\n  order.rebateBips = order.rebateBips !== undefined ? order.rebateBips : 0;\n  order.label = order.label !== undefined ? order.label : config.getLabel();\n\n  assert(order.maxFeeBips < 64, \"maxFeeBips >= 64\");\n  assert(order.feeBips < 64, \"feeBips >= 64\");\n  assert(order.rebateBips < 64, \"rebateBips >= 64\");\n  assert(order.label < 2 ** 16, \"order.label >= 2**16\");\n\n  // Sign the order\n  return order;\n}\n\nexport function getRandomInt(max) {\n  return Math.floor(Math.random() * max);\n}\n\nexport function signCancel(_cancel, keyPair) {\n  if (_cancel.signature !== undefined) {\n    return;\n  }\n  const cancel = setupCancel(_cancel);\n  const hasher = Poseidon.createHash(9, 6, 53);\n\n  // Calculate hash\n  const inputs = [\n    cancel.exchangeId,\n    cancel.accountId,\n    cancel.orderTokenId,\n    cancel.orderId,\n    cancel.tokenFId,\n    cancel.amountFInBN,\n    cancel.label,\n    cancel.nonce,\n  ];\n  const hash = hasher(inputs).toString(10);\n\n  // Create signature\n  cancel.signature = EdDSA.sign(keyPair.secretKey, hash);\n\n  /**\n     *\n     // Verify signature\n     const success = EdDSA.verify(hash, cancel.signature, [\n     keyPair.publicKeyX,\n     keyPair.publicKeyY\n     ]);\n     assert(success, 'Failed to verify signature');\n     */\n\n  return cancel;\n}\n\nfunction setupCancel(cancel, tokens) {\n  let orderToken, feeToken;\n  if (!cancel.orderToken.startsWith(\"0x\")) {\n    orderToken = config.getTokenBySymbol(cancel.orderToken, tokens);\n  } else {\n    orderToken = config.getTokenByAddress(cancel.orderToken, tokens);\n  }\n  if (!cancel.tokenF.startsWith(\"0x\")) {\n    feeToken = config.getTokenBySymbol(cancel.tokenF, tokens);\n  } else {\n    feeToken = config.getTokenByAddress(cancel.tokenF, tokens);\n  }\n  cancel.tokenFId = feeToken.tokenId;\n  cancel.tokenF = feeToken.symbol;\n  cancel.orderTokenId = orderToken.tokenId;\n  cancel.orderToken = orderToken.symbol;\n\n  cancel.amountFInBN = config.toWEI(feeToken.symbol, cancel.amountF, tokens);\n  cancel.amountF = cancel.amountFInBN;\n\n  cancel.label = cancel.label !== undefined ? cancel.label : config.getLabel();\n  return cancel;\n}\n\nexport function signFlexCancel(request, keyPair) {\n  if (request.signature !== undefined) {\n    return;\n  }\n\n  const method = \"DELETE\";\n  const uri = encodeURIComponent(`${config.getServer()}/api/v2/orders`);\n  let params = `accountId=${request.accountId}`;\n\n  if (request.clientOrderId) {\n    params = params + `&clientOrderId=${request.clientOrderId}`;\n  }\n\n  if (request.orderHash) {\n    params = params + `&orderHash=${request.orderHash}`;\n  }\n\n  const encodedParams = encodeURIComponent(params);\n  const message = `${method}&${uri}&${encodedParams}`;\n\n  const hash = fm.addHexPrefix(sha256(message).toString());\n  // Create signature\n  request.signature = EdDSA.sign(keyPair.secretKey, hash);\n\n  /**\n     *\n     // Verify signature\n     const success = EdDSA.verify(hash, request.signature, [\n     keyPair.publicKeyX,\n     keyPair.publicKeyY\n     ]);\n     assert(success, 'Failed to verify signature');\n     */\n\n  return request;\n}\n\nexport function signTransfer(transfer, keyPair, tokens) {\n  const tokenConf = config.getTokenBySymbol(transfer.token, tokens);\n  const tokenFConf = config.getTokenBySymbol(transfer.tokenF, tokens);\n  const amountInBN = config.toWEI(transfer.token, transfer.amount, tokens);\n  const amountFInBN = config.toWEI(transfer.tokenF, transfer.amountF, tokens);\n  transfer.token = tokenConf.tokenId;\n  transfer.tokenF = tokenFConf.tokenId;\n  transfer.amount = amountInBN;\n  transfer.amountF = amountFInBN;\n\n  const inputs = [\n    transfer.exchangeId,\n    transfer.sender,\n    transfer.receiver,\n    transfer.token,\n    amountInBN,\n    transfer.tokenF,\n    amountFInBN,\n    transfer.label,\n    transfer.nonce,\n  ];\n\n  const hasher = Poseidon.createHash(10, 6, 53);\n  const hash = hasher(inputs).toString(10);\n  const signature = EdDSA.sign(keyPair.secretKey, hash);\n\n  transfer.signatureRx = signature.Rx;\n  transfer.signatureRy = signature.Ry;\n  transfer.signatureS = signature.s;\n\n  return transfer;\n}\n\nexport function encodeTransfer({\n  exchangeId,\n  sender,\n  receiver,\n  token,\n  amount,\n  tokenF,\n  amountF,\n  label,\n  nonce,\n}) {\n  const inputs = {\n    exchangeId: exchangeId,\n    sender: sender,\n    receiver: receiver,\n    token: token,\n    amount: amount,\n    tokenF: tokenF,\n    amountF: amountF,\n    label: label,\n    nonce: nonce,\n  };\n\n  return fm.addHexPrefix(sha256(JSON.stringify(inputs)).toString());\n}\n","import { hashPersonalMessage, keccak } from \"ethereumjs-util\";\nimport { toBig, toHex } from \"./formatter\";\nimport crypto from \"crypto\";\n\n/**\n * trim head space and tail space\n * @param str string\n */\nexport function trim(str) {\n  return str.replace(/(^\\s+)|(\\s+$)/g, \"\");\n}\n\n/**\n * trim all spaces\n * @param str\n */\nexport function trimAll(str) {\n  return trim(str).replace(/\\s/g, \"\");\n}\n\nexport function keccakHash(str) {\n  return toHex(keccak(str));\n}\n\nexport async function pbkdf2Hash(password, address, salt = \"Loopring\") {\n  return new Promise((resolve) => {\n    crypto.pbkdf2(\n      password,\n      salt + address.toLowerCase(),\n      4000000,\n      32,\n      \"sha256\",\n      function (err, result) {\n        if (err) {\n          resolve({ error: err });\n        } else {\n          resolve({ hash: toHex(result) });\n        }\n      }\n    );\n  });\n}\n\nexport function calculateGas(gasPrice, gasLimit) {\n  return toBig(gasPrice).times(gasLimit).div(1e9);\n}\n\nexport default {\n  hashPersonalMessage,\n  trim,\n  trimAll,\n  keccakHash,\n  calculateGas,\n  pbkdf2Hash,\n};\n","import axios from \"axios\";\nimport config from \"../config\";\n\nexport const SERVER_URL = config.getServer();\n\n/**\n * @description Supports single request and batch request;\n * @param options\n * @param parse\n * @returns {Promise}\n */\nexport default function request(options, parse) {\n  options.timeout = options.timeout || 30000;\n  options.baseURL = options.baseURL || SERVER_URL;\n\n  return axios(options).then((response) => {\n    if (parse) {\n      return parse(response);\n    } else {\n      return parseResponse(response);\n    }\n  });\n}\n\nfunction parseResponse(response) {\n  const data = response[\"data\"];\n  const resultInfo = data[\"resultInfo\"];\n  const errorData = data[\"error\"];\n\n  // Some API endpoints in the old versions don't have resultInfo.\n  if (resultInfo) {\n    const code = resultInfo[\"code\"];\n    if (code !== 0) {\n      const errorMessage = resultInfo[\"message\"];\n      throw Error(errorMessage);\n    }\n    return data;\n  } else if (errorData) {\n    const code = errorData[\"code\"];\n    if (code !== 0) {\n      const errorMessage = `${errorData[\"code\"]} ${errorData[\"message\"]}`;\n      throw Error(errorMessage);\n    }\n    return data;\n  } else {\n    return data;\n  }\n}\n","let schemas = {\n  STRING: {\n    type: \"string\",\n    required: true,\n  },\n  URL: {\n    type: \"url\",\n    required: true,\n  },\n  ADDRESS: {\n    type: \"string\",\n    required: true,\n    pattern: /^0x[0-9a-fA-F]{40}$/g,\n  },\n  HEX: {\n    type: \"string\",\n    required: true,\n    pattern: /^0x[0-9a-fA-F]*$/g,\n  },\n  ETH_DATA: {\n    type: \"string\",\n    required: true,\n    pattern: /^0x[0-9a-fA-F]{1,64}$/g,\n  },\n  TX_HASH: {\n    type: \"string\",\n    required: true,\n    pattern: /^0x[0-9a-fA-F]{64}$/g,\n  },\n  RPC_TAG: {\n    type: \"enum\",\n    required: true,\n    enum: [\"latest\", \"earliest\", \"pending\"],\n  },\n  TX: {\n    type: \"object\",\n    required: true,\n    fields: {\n      from: {\n        type: \"string\",\n        required: true,\n        pattern: /^0x[0-9a-fA-F]{40}$/g,\n      },\n      to: {\n        type: \"string\",\n        required: true,\n        pattern: /^0x[0-9a-fA-F]{40}$/g,\n      },\n      value: {\n        type: \"string\",\n        required: true,\n        pattern: /^[0-9]*$/g,\n      },\n      gas: {\n        type: \"string\",\n        required: true,\n        pattern: /^[1-9][0-9]*$/g,\n      },\n      gasPrice: {\n        type: \"string\",\n        required: true,\n        pattern: /^[1-9][0-9]*$/g,\n      },\n      chainId: {\n        type: \"number\",\n        required: true,\n      },\n      nonce: {\n        type: \"string\",\n        required: true,\n        pattern: /^[0-9]*$/g,\n      },\n      data: {\n        type: \"string\",\n        required: true,\n        pattern: /^0x[0-9a-fA-F]*$/g,\n      },\n      signed: {\n        type: \"string\",\n      },\n    },\n  },\n};\n\nexport default schemas;\n","import Schema from \"async-validator\";\nimport schemas from \"./schemas\";\n\nlet handleErrors = (errors) => {\n  let msgs = errors.map((err) => err.message).join();\n  throw new Error(`data type invalid: ${msgs} \\n`);\n};\n\nexport default async function validate(payload) {\n  let { type, value, onError, onSuccess } = payload;\n  let source = {};\n  let schema = {};\n\n  if (typeof value === \"undefined\") {\n    throw new Error(`data type invalid: ${type} should not be undefined`);\n  }\n  if (value === null) {\n    throw new Error(`data type invalid: ${type} should not be null`);\n  }\n\n  if (schemas[type]) {\n    schema[type] = schemas[type];\n    source[type] = value;\n  }\n\n  let validator = new Schema(schema);\n  await validator.validate(source, (errors, fields) => {\n    if (errors) {\n      if (onError) {\n        onError(errors, fields);\n      } else {\n        handleErrors(errors, fields);\n      }\n    } else {\n      if (onSuccess) {\n        onSuccess();\n      }\n    }\n  });\n}\n","import { addHexPrefix, toBuffer, toHex, toNumber } from \"../common/formatter\";\nimport { hashPersonalMessage, keccak256 } from \"ethereumjs-util\";\nimport { validate } from \"../common\";\nimport ABI from \"../ethereum/contracts\";\nimport Transaction from \"ethereumjs-tx\";\n\n/**\n * @description sign hash\n * @param web3\n * @param account\n * @param hash\n * @returns {Promise.<*>}\n */\nexport async function sign(web3, account, hash) {\n  await validate({ value: account, type: \"ETH_ADDRESS\" });\n\n  return new Promise((resolve) => {\n    web3.eth.sign(hash, account, function (err, result) {\n      if (!err) {\n        const r = result.slice(0, 66);\n        const s = addHexPrefix(result.slice(66, 130));\n        const v = toNumber(addHexPrefix(result.slice(130, 132)));\n        resolve({ result: { r, s, v } });\n      } else {\n        const errorMsg = err.message.substring(0, err.message.indexOf(\" at \"));\n        resolve({ error: { message: errorMsg } });\n      }\n    });\n  });\n}\n\n/**\n * @description sign message\n * @param web3\n * @param account\n * @param message\n * @returns {Promise}\n */\nexport async function signMessage(web3, account, message) {\n  const hash = toHex(hashPersonalMessage(keccak256(message)));\n  return await sign(web3, account, hash);\n}\n\nexport async function personalSign(web3, account, msg) {\n  return new Promise((resolve) => {\n    web3.eth.personal.sign(msg, account, \"\", async function (err, result) {\n      if (!err) {\n        const valid = await ecRecover(web3, account, msg, result);\n        if (valid.result) {\n          resolve({ sig: result });\n        } else {\n          const walletValid = await contractWalletValidate(\n            web3,\n            account,\n            msg,\n            result\n          );\n          // console.log(JSON.stringify(walletValid));\n          if (walletValid.result) {\n            resolve({ sig: result });\n          } else {\n            const walletValid2 = await contractWalletValidate2(\n              web3,\n              account,\n              msg,\n              result\n            );\n            console.log(JSON.stringify(walletValid2));\n            if (walletValid2.result) {\n              resolve({ sig: result });\n            } else {\n              resolve({ error: \"invalid sig\" });\n            }\n          }\n        }\n      } else resolve({ error: err });\n    });\n  });\n}\n\nexport async function ecRecover(web3, account, msg, sig) {\n  return new Promise((resolve) => {\n    web3.eth.personal.ecRecover(msg, sig, function (err, address) {\n      if (!err)\n        resolve({\n          result: address.toLowerCase() === account.toLowerCase(),\n        });\n      else resolve({ error: err });\n    });\n  });\n}\n\nexport async function contractWalletValidate(web3, account, msg, sig) {\n  return new Promise((resolve) => {\n    const hash = hashPersonalMessage(toBuffer(msg));\n    const data = ABI.Contracts.ContractWallet.encodeInputs(\n      \"isValidSignature(bytes,bytes)\",\n      {\n        _data: hash,\n        _signature: toBuffer(sig),\n      }\n    );\n\n    web3.eth.call(\n      {\n        to: account, // contract addr\n        data: data,\n      },\n      function (err, result) {\n        if (!err) {\n          const valid = ABI.Contracts.ContractWallet.decodeOutputs(\n            \"isValidSignature(bytes,bytes)\",\n            result\n          );\n          resolve({\n            result: toHex(toBuffer(valid[0])) === data.slice(0, 10),\n          });\n        } else resolve({ error: err });\n      }\n    );\n  });\n}\n\nexport async function contractWalletValidate2(web3, account, msg, sig) {\n  return new Promise((resolve) => {\n    const hash = hashPersonalMessage(toBuffer(msg));\n    const data = ABI.Contracts.ContractWallet.encodeInputs(\n      \"isValidSignature(bytes32,bytes)\",\n      {\n        _data: hash,\n        _signature: toBuffer(sig),\n      }\n    );\n\n    web3.eth.call(\n      {\n        to: account, // contract addr\n        data: data,\n      },\n      function (err, result) {\n        if (!err) {\n          const valid = ABI.Contracts.ContractWallet.decodeOutputs(\n            \"isValidSignature(bytes32,bytes)\",\n            result\n          );\n          resolve({\n            result: toHex(toBuffer(valid[0])) === data.slice(0, 10),\n          });\n        } else resolve({ error: err });\n      }\n    );\n  });\n}\n\n/**\n * @description Signs ethereum tx\n * @param web3\n * @param account\n * @param rawTx\n * @returns {Promise.<*>}\n */\nexport async function signEthereumTx(web3, account, rawTx) {\n  await validate({ value: rawTx, type: \"TX\" });\n  const ethTx = new Transaction(rawTx);\n  const hash = toHex(ethTx.hash(false));\n  const response = await sign(web3, account, hash);\n  if (!response[\"error\"]) {\n    const signature = response[\"result\"];\n    signature.v += ethTx.getChainId() * 2 + 8;\n    Object.assign(ethTx, signature);\n    return { result: toHex(ethTx.serialize()) };\n  } else {\n    throw new Error(response[\"error\"][\"message\"]);\n  }\n}\n\n/**\n * @description Sends ethereum tx through MetaMask\n * @param web3\n * @param tx\n * @returns {*}\n */\nexport async function sendTransaction(web3, tx) {\n  await validate({ type: \"TX\", value: tx });\n  delete tx.gasPrice;\n  const response = await new Promise((resolve) => {\n    web3.eth.sendTransaction(tx, function (err, transactionHash) {\n      if (!err) {\n        resolve({ result: transactionHash });\n      } else {\n        resolve({ error: { message: err.message } });\n      }\n    });\n  });\n\n  if (response[\"result\"]) {\n    return response;\n  } else {\n    throw new Error(response[\"error\"][\"message\"]);\n  }\n}\n","import * as exchange from \"../sign/exchange\";\nimport * as fm from \"../common/formatter\";\nimport {\n  personalSign,\n  sendTransaction,\n  signEthereumTx,\n} from \"../ethereum/metaMask\";\nimport { sha256 } from \"ethereumjs-util\";\nimport Contracts from \"../ethereum/contracts/Contracts\";\nimport config from \"../config\";\n\nconst assert = require(\"assert\");\n\nexport default class Wallet {\n  keyMessage = \"Sign this message to access Loopring Exchange: \";\n  transferMessage = \"Sign this message to authorize Loopring Pay: \";\n\n  constructor(walletType, web3, address, accountId = -1, keyPair = null) {\n    this.walletType = walletType;\n    this.web3 = web3;\n    this.address = address;\n    this.accountId = accountId;\n    this.keyPair = keyPair;\n  }\n\n  /**\n   * Approve Zero\n   * @param tokenAddress: approve token symbol to zero\n   * @param nonce: Ethereum nonce of this address\n   * @param gasPrice: gas price in gwei\n   * @param sendByMetaMask\n   */\n  async approveZero(\n    tokenAddress,\n    exchangeAddress,\n    chainId,\n    nonce,\n    gasPrice,\n    sendByMetaMask = false\n  ) {\n    const rawTx = {\n      from: this.address,\n      to: tokenAddress,\n      value: \"0\",\n      data: Contracts.ERC20Token.encodeInputs(\"approve\", {\n        _spender: exchangeAddress,\n        _value: \"0x0\",\n      }),\n      chainId: chainId,\n      nonce: nonce.toString(),\n      gasPrice: fm.fromGWEI(gasPrice).toString(),\n      gas: config.getGasLimitByType(\"approve\").gas.toString(),\n    };\n\n    const response = sendByMetaMask\n      ? await sendTransaction(this.web3, rawTx)\n      : await signEthereumTx(this.web3, this.address, rawTx);\n    return response[\"result\"];\n  }\n\n  /**\n   * Approve Max\n   * @param tokenAddress: approve token symbol to max\n   * @param nonce: Ethereum nonce of this address\n   * @param gasPrice: gas price in gwei\n   * @param sendByMetaMask\n   */\n  async approveMax(\n    tokenAddress,\n    exchangeAddress,\n    chainId,\n    nonce,\n    gasPrice,\n    sendByMetaMask = false\n  ) {\n    const rawTx = {\n      from: this.address,\n      to: tokenAddress,\n      value: \"0\",\n      data: Contracts.ERC20Token.encodeInputs(\"approve\", {\n        _spender: exchangeAddress,\n        _value: config.getMaxAmountInWEI(),\n      }),\n      chainId: chainId,\n      nonce: nonce.toString(),\n      gasPrice: fm.fromGWEI(gasPrice).toString(),\n      gas: config.getGasLimitByType(\"approve\").gas.toString(),\n    };\n    const response = sendByMetaMask\n      ? await sendTransaction(this.web3, rawTx)\n      : await signEthereumTx(this.web3, this.address, rawTx);\n\n    return response[\"result\"];\n  }\n\n  /**\n   * generate key pair of account in DEX\n   */\n  async generateKeyPair(exchangeAddress, keyNonce) {\n    assert(this.address !== null);\n\n    const result = await personalSign(\n      this.web3,\n      this.address,\n      this.keyMessage + exchangeAddress + \" with key nonce: \" + keyNonce\n    );\n\n    if (!result.error) {\n      return {\n        keyPair: exchange.generateKeyPair(sha256(fm.toBuffer(result.sig))),\n      };\n    } else return result;\n  }\n\n  /**\n   * verify EDDSA Private Key of account in DEX\n   */\n  async verify(exchangeAddress, keyNonce) {\n    assert(this.address !== null);\n\n    const result = await personalSign(\n      this.web3,\n      this.address,\n      this.keyMessage + exchangeAddress + \" with key nonce: \" + keyNonce\n    );\n\n    if (result.error) {\n      throw new Error(result.error.message);\n    }\n\n    return exchange.verify(\n      this.keyPair.publicKeyX,\n      this.keyPair.publicKeyY,\n      sha256(fm.toBuffer(result.sig))\n    );\n  }\n\n  /**\n   * create Or Update Account in DEX\n   * @param gasPrice: in gwei\n   * @param nonce: Ethereum nonce of this address\n   * @param permission: user permission\n   * @param sendByMetaMask\n   */\n\n  /**\n   *\n   * exchangeAddress,\n   fee,\n   chainId,\n   publicX,\n   publicY,\n   token,\n   amount,\n   permission,\n   nonce,\n   gasPrice\n   *\n   * */\n  async createOrUpdateAccount(keyPair, payload, sendByMetaMask = false) {\n    payload[\"from\"] = this.address;\n\n    const tx = exchange.createAccountAndDeposit({\n      ...payload,\n      publicX: keyPair.publicKeyX,\n      publicY: keyPair.publicKeyY,\n    });\n\n    const response = sendByMetaMask\n      ? await sendTransaction(this.web3, tx)\n      : await signEthereumTx(this.web3, this.address, tx);\n\n    return response[\"result\"];\n  }\n\n  /**\n   * Deposit to Dex\n   * @param payload\n   * @param sendByMetaMask\n   */\n  async depositTo(payload, sendByMetaMask = false) {\n    payload[\"from\"] = this.address;\n    const tx = exchange.deposit(payload);\n    const response = sendByMetaMask\n      ? await sendTransaction(this.web3, tx)\n      : await signEthereumTx(this.web3, this.address, tx);\n    return response[\"result\"];\n  }\n\n  /**\n   * On-chain Withdrawal from Dex\n   * @param payload\n   * @param sendByMetaMask\n   */\n  async onchainWithdrawal(payload, sendByMetaMask) {\n    payload[\"from\"] = this.address;\n    const tx = exchange.onChainWithdraw(payload);\n    const response = sendByMetaMask\n      ? await sendTransaction(this.web3, tx)\n      : await signEthereumTx(this.web3, this.address, tx);\n    return response[\"result\"];\n  }\n\n  /**\n   * Off-chain Withdrawal from Dex\n   * @param accountId: account ID in exchange\n   * @param nonce: DEX nonce of account\n   * @param token: token symbol or address to withdraw\n   * @param amount: amount to withdraw, in decimal string. e.g. '15'\n   * @param tokenF: fee token symbol or address to withdraw\n   * @param amountF: withdrawal fee, in decimal string. e.g. '15'\n   * @param label: label used in protocol\n   */\n  offchainWithdrawal(accountId, nonce, token, amount, tokenF, amountF, label) {\n    const withdraw = {\n      accountId: this.accountId,\n      nonce: nonce,\n      token: token,\n      amount: amount,\n      tokenF: tokenF,\n      amountF: amountF,\n      label: label,\n    };\n    return exchange.signWithdrawal(withdraw, this.keyPair);\n  }\n\n  /**\n   * Get signed order, should be submitted by frontend itself TEMPORARY\n   * @param tokenS: symbol or hex address of token sell\n   * @param tokenB: symbol or hex address of token buy\n   * @param amountS: amount of token sell, in string number\n   * @param amountB: amount of token buy, in string number\n   * @param orderId: next order ID, needed by order signature\n   * @param validSince: valid beginning period of this order, SECOND in timestamp\n   * @param validUntil: valid ending period of this order, SECOND in timestamp\n   * @param label label used in protocol\n   * @param buy boolean\n   * @param channelId\n   */\n  submitOrder(\n    tokens,\n    exchangeId,\n    tokenS,\n    tokenB,\n    amountS,\n    amountB,\n    orderId,\n    validSince,\n    validUntil,\n    label,\n    buy,\n    channelId\n  ) {\n    const order = {\n      exchangeId,\n      owner: this.address,\n      accountId: this.accountId,\n      tokenS: tokenS,\n      tokenB: tokenB,\n      amountS: amountS,\n      amountB: amountB,\n      orderId: orderId,\n      validSince: Math.floor(validSince),\n      validUntil: Math.floor(validUntil),\n      label: label,\n      buy: buy,\n      channelId,\n    };\n\n    return exchange.signOrder(order, this.keyPair, tokens);\n  }\n\n  /**\n   * Cancel order in Dex\n   * @param nonce: DEX nonce of account\n   * @param orderToken: token symbol or address of cancel\n   * @param orderId: specified order id to cancel\n   * @param tokenF: amountF token symbol or address of cancel\n   * @param amountF: cancel amountF, e.g. '15'\n   * @param label: [OPTIONAL] label used in protocol\n   */\n  submitCancel(nonce, orderToken, orderId, tokenF, amountF, label) {\n    const cancel = {\n      accountId: this.accountId,\n      nonce: nonce,\n      orderToken: orderToken,\n      orderId: orderId,\n      tokenF: tokenF,\n      amountF: amountF,\n      label: label,\n    };\n\n    return exchange.signCancel(cancel, this.keyPair);\n  }\n\n  /**\n   * Get Api Key signature\n   */\n  getApiKey() {\n    const request = {\n      accountId: this.accountId,\n    };\n    return exchange.signGetApiKey(request, this.keyPair);\n  }\n\n  applyApiKey() {\n    const request = {\n      accountId: this.accountId,\n    };\n    return exchange.signApplyApiKey(request, this.keyPair);\n  }\n\n  /**\n   * Get Api Key signature\n   * @param orderHash: [OPTIONAL] specified order hash to cancel\n   * @param clientOrderId: [OPTIONAL] specified client order ID to cancel\n   */\n  submitFlexCancel(orderHash = \"\", clientOrderId = \"\") {\n    const request = {\n      accountId: this.accountId,\n      orderHash: orderHash,\n      clientOrderId: clientOrderId,\n    };\n    return exchange.signFlexCancel(request, this.keyPair);\n  }\n\n  /**\n   * Generate Hebao Guadian message\n   */\n  async generateHebaoGuadianMessage(type, message) {\n    assert(this.address !== null);\n\n    const result = await personalSign(this.web3, this.address, message);\n\n    if (result.error) {\n      throw new Error(result.error.message);\n    }\n\n    return {\n      address: this.address,\n      sig: result[\"sig\"],\n      type,\n    };\n  }\n\n  async signTransfer(transfer, tokens) {\n    transfer.sender = this.accountId;\n    const signedTransfer = exchange.signTransfer(\n      transfer,\n      this.keyPair,\n      tokens\n    );\n\n    const encodeTransfer = exchange.encodeTransfer(signedTransfer);\n    const result = await personalSign(\n      this.web3,\n      this.address,\n      `${this.transferMessage}${encodeTransfer}`\n    );\n\n    if (!result.error) {\n      return {\n        ecdsaSig: result.sig,\n        transfer: signedTransfer,\n      };\n    } else return result;\n  }\n}\n","import Wallet from \"./wallet\";\n\nexport default Wallet;\n","import { signSetReferrer } from \"../sign/exchange\";\nimport config from \"../config\";\nimport request from \"../common/request\";\n\nconst dropTrailingZeroes = (num) => {\n    const numString = String(num);\n    if (numString) {\n        const numTrailingZeroes = countTrailingZeroes(numString);\n        const dropedZeroes = numString.substring(\n            0,\n            numString.length - numTrailingZeroes\n        );\n        if (dropedZeroes.endsWith(\".\")) {\n            return dropedZeroes.substring(0, dropedZeroes.length - 1);\n        } else {\n            return dropedZeroes;\n        }\n    } else {\n        return numString;\n    }\n};\n\nconst countTrailingZeroes = (numString) => {\n    let numZeroes = 0;\n    for (let digit of numString.split(\"\").reverse()) {\n        if (digit === \"0\" || digit === 0) {\n            numZeroes = numZeroes + 1;\n        } else {\n            return numZeroes;\n        }\n    }\n    return numZeroes;\n};\n\nexport function getRefreshDurationInMillionSeconds() {\n    return 30 * 1000;\n}\n\nexport function getApiDocsURL() {\n    return `${config.getServer()}/docs/`;\n}\n\nexport async function getApiKey(data, signed) {\n    const signature = signed.Rx + \",\" + signed.Ry + \",\" + signed.s;\n    const headers = {\n        \"X-API-SIG\": signature,\n    };\n\n    const response = await request({\n        method: \"GET\",\n        url: \"/api/v2/apiKey\",\n        headers: headers,\n        params: data,\n    });\n    return response[\"data\"];\n}\n\nexport async function applyApiKey(data, signed) {\n    const signature = signed.Rx + \",\" + signed.Ry + \",\" + signed.s;\n    const headers = {\n        \"X-API-SIG\": signature,\n    };\n    const response = await request({\n        method: \"POST\",\n        url: \"/api/v2/apiKey\",\n        headers: headers,\n        data,\n    });\n\n    return response[\"data\"];\n}\n\nexport async function getDexNonce(data) {\n    return await request({\n        method: \"GET\",\n        url: \"/api/v2/dexNonce\",\n        param: data,\n    });\n}\n\nexport async function submitOrderToLightcone(data, apiKey) {\n    const headers = {\n        \"X-API-KEY\": apiKey,\n    };\n    return await request({\n        method: \"POST\",\n        url: \"/api/v2/order\",\n        headers: headers,\n        data,\n    });\n}\n\n// Return order id\nexport async function getOrderId(accountId, tokenSId, apiKey) {\n    const params = {\n        accountId: accountId,\n        tokenSId: tokenSId,\n    };\n    const headers = {\n        \"X-API-KEY\": apiKey,\n    };\n    const response = await request({\n        method: \"GET\",\n        url: \"/api/v2/orderId\",\n        headers: headers,\n        params,\n    });\n\n    return response[\"data\"];\n}\n\nexport async function lightconeGetAccount(owner) {\n    const params = {\n        owner,\n    };\n\n    const response = await request({\n        method: \"GET\",\n        url: \"/api/v2/account\",\n        params,\n    });\n\n    return response[\"data\"];\n}\n\nexport async function getTimestamp() {\n    return await request({\n        method: \"POST\",\n        url: \"/api/v2/timestamp\",\n    });\n}\n\nexport async function getTrade(market, limit) {\n    const params = {\n        market,\n        limit,\n    };\n    const response = await request({\n        method: \"GET\",\n        url: \"/api/v2/trade\",\n        params,\n    });\n\n    return response[\"data\"][\"trades\"];\n}\n\nexport function arrToTrade(arr) {\n    return {\n        timestamp: Number(arr[0]),\n        tradeId: Number(arr[1]),\n        side: arr[2],\n        size: arr[3],\n        price: arr[4],\n        market: arr[5],\n        fee: arr[6],\n    };\n}\n\nexport async function getDepositHistory(\n    accountId,\n    tokenSymbol,\n    limit,\n    offset,\n    apiKey,\n    tokens\n) {\n    const params = {\n        accountId,\n        limit,\n        offset,\n        allType: true,\n        start: 0,\n        end: Date.now() * 1000,\n    };\n\n    if (typeof tokenSymbol !== \"undefined\") {\n        params.tokenSymbol = tokenSymbol;\n    }\n\n    const headers = {\n        \"X-API-KEY\": apiKey,\n    };\n\n    const response = await request({\n        method: \"GET\",\n        url: \"/api/v2/user/deposits\",\n        headers: headers,\n        params,\n    });\n\n    const data = response[\"data\"];\n    const totalNum = data[\"totalNum\"];\n    const transactions = data[\"transactions\"];\n    const updatedTransactions = mapTransactions(transactions, tokens);\n    return {\n        totalNum,\n        transactions: updatedTransactions,\n        limit,\n        offset,\n    };\n}\n\nexport function mapAmountInUI(baseToken, amount, tokens) {\n    let amountInUI = config.fromWEI(baseToken.symbol, amount, tokens);\n    if (parseFloat(amountInUI) === 0) {\n        let amountInDecimals = config.fromWEI(\n            baseToken.symbol,\n            amount,\n            tokens,\n            {\n                precision: baseToken.decimals,\n            }\n        );\n        amountInDecimals = dropTrailingZeroes(amountInDecimals);\n        if (parseFloat(amountInDecimals) !== 0) {\n            return amountInDecimals;\n        }\n    }\n\n    return amountInUI;\n}\n\nfunction mapTransactions(transactions, tokens) {\n    let updatedTransactions = [];\n    for (let i = 0; i < transactions.length; i = i + 1) {\n        let transaction = transactions[i];\n\n        const baseToken = config.getTokenBySymbol(transaction.symbol, tokens);\n        let amountInUI = mapAmountInUI(baseToken, transaction.amount, tokens);\n        let realAmountInUI = transaction.realAmount\n            ? mapAmountInUI(baseToken, transaction.realAmount, tokens)\n            : \"\";\n        // Why this is feeAmount?\n        const feeInUI = config.fromWEI(\"ETH\", transaction.feeAmount, tokens);\n\n        const txHashInUI =\n            transaction.txHash.substring(0, 7) +\n            \"...\" +\n            transaction.txHash.slice(-7);\n\n        const distributeHashInUI = transaction.distributeHash\n            ? transaction.distributeHash.substring(0, 7) +\n              \"...\" +\n              transaction.distributeHash.slice(-7)\n            : \"\";\n\n        const updatedTransaction = {\n            ...transaction,\n            tokenName: baseToken.name,\n            amountInUI,\n            realAmountInUI,\n            feeInUI,\n            txHashInUI,\n            distributeHashInUI,\n        };\n        updatedTransactions.push(updatedTransaction);\n    }\n    return updatedTransactions;\n}\n\nexport async function getWithdrawalHistory(\n    accountId,\n    tokenSymbol,\n    limit,\n    offset,\n    apiKey,\n    tokens\n) {\n    const params = {\n        accountId,\n        limit,\n        offset,\n        start: 0,\n        end: Date.now() * 1000,\n    };\n\n    if (typeof tokenSymbol !== \"undefined\") {\n        params.tokenSymbol = tokenSymbol;\n    }\n\n    const headers = {\n        \"X-API-KEY\": apiKey,\n    };\n\n    const response = await request({\n        method: \"GET\",\n        url: \"/api/v2/user/withdrawals\",\n        headers: headers,\n        params,\n    });\n\n    const data = response[\"data\"];\n    const totalNum = data[\"totalNum\"];\n    const transactions = data[\"transactions\"];\n    const updatedTransactions = mapTransactions(transactions, tokens);\n    return {\n        totalNum,\n        transactions: updatedTransactions,\n        limit,\n        offset,\n    };\n}\n\nexport async function getTicker(markets, tokens) {\n    const params = {\n        market: markets.reduce((acc, cur) => acc + \",\" + cur),\n    };\n\n    const response = await request({\n        method: \"GET\",\n        url: \"/api/v2/ticker\",\n        params,\n    });\n    return mapTicker(\n        response[\"data\"].map((arr) => arrToTicker(arr)),\n        tokens\n    );\n}\n\nfunction mapTicker(tickers, configTokens) {\n    let updatedTickers = [];\n    for (let i = 0; i < tickers.length; i = i + 1) {\n        const ticker = tickers[i];\n\n        const tokens = ticker.market.split(\"-\");\n        const baseToken = tokens[0];\n        const quoteToken = tokens[1];\n        const open = parseFloat(ticker[\"open\"]);\n        const close = parseFloat(ticker[\"close\"]);\n        let percentChange24h = (((close - open) / open) * 100).toFixed(2);\n        percentChange24h =\n            percentChange24h !== \"NaN\" ? percentChange24h : \"0.00\";\n        if (close - open > 0) {\n            percentChange24h = `+ ${percentChange24h}`;\n        }\n\n        const updatedTicker = {\n            ...ticker,\n            percentChange24h,\n            size: config.fromWEI(baseToken, ticker.size, configTokens),\n            volume: config.fromWEI(quoteToken, ticker.volume, configTokens, {\n                precision: 2,\n            }),\n        };\n        updatedTickers.push(updatedTicker);\n    }\n    return updatedTickers;\n}\n\nexport function arrToTicker(arr) {\n    return {\n        market: arr[0],\n        timestamp: Number(arr[1]),\n        size: arr[2],\n        volume: arr[3],\n        open: arr[4],\n        high: arr[5],\n        low: arr[6],\n        close: arr[7],\n        count: Number(arr[8]),\n        bid: arr[9],\n        ask: arr[10],\n    };\n}\n\nexport async function getExchangeInfo() {\n    const data = {};\n\n    const response = await request({\n        method: \"GET\",\n        url: \"/api/v2/exchange/info\",\n        data,\n    });\n\n    return response[\"data\"];\n}\n\nexport async function setRefer(info, keyPair) {\n    const signed = signSetReferrer(info, keyPair);\n    const signature = signed.Rx + \",\" + signed.Ry + \",\" + signed.s;\n    let data;\n    if (info.referrer) {\n        data = {\n            address: info.address,\n            referrer: info.referrer,\n            publicKeyX: keyPair.publicKeyX,\n            publicKeyY: keyPair.publicKeyY,\n        };\n    } else {\n        data = {\n            address: info.address,\n            promotionCode: info.promotionCode,\n            publicKeyX: keyPair.publicKeyX,\n            publicKeyY: keyPair.publicKeyY,\n        };\n    }\n\n    const headers = {\n        \"X-API-SIG\": signature,\n    };\n\n    const response = await request({\n        method: \"POST\",\n        url: \"/api/v2/refer\",\n        headers: headers,\n        data,\n    });\n\n    return response[\"data\"];\n}\n","import { formatter, request } from \"../../../common\";\n\nexport async function getTokenInfo() {\n  const data = {};\n  const response = await request({\n    method: \"GET\",\n    url: \"/api/v2/exchange/tokens\",\n    data,\n  });\n\n  let tokens = response[\"data\"];\n  let updatedTokens = disableDelistedTokens(tokens);\n  response[\"data\"] = updatedTokens;\n\n  return response[\"data\"].map((token) => {\n    token.address = formatter.formatAddress(token.address);\n    return token;\n  });\n}\n\nfunction disableDelistedTokens(tokens) {\n  let delistedTokens = [\"TRB\"];\n\n  let updatedTokens = [];\n  for (let i = 0; i < tokens.length; i = i + 1) {\n    let token = tokens[i];\n    token[\"depositEnabled\"] = true;\n    for (let j = 0; j < delistedTokens.length; j = j + 1) {\n      if (token.symbol.includes(delistedTokens[j])) {\n        token[\"depositEnabled\"] = false;\n      }\n    }\n    updatedTokens.push(token);\n  }\n  return updatedTokens;\n}\n","import { mapAmountInUI } from \"../../LightconeAPI\";\nimport { request } from \"../../../common\";\nimport config from \"../../../config\";\nconst BigNumber = require(\"bignumber.js\");\n\n// tokenIds is skip to get all tokens\nexport async function getBalances(accountId, apiKey, tokens, skip, limit) {\n  const params = {\n    accountId,\n    skip,\n    limit,\n  };\n  const headers = {\n    \"X-API-KEY\": apiKey,\n  };\n  const response = await request({\n    method: \"GET\",\n    url: \"/api/v2/user/balances\",\n    headers: headers,\n    params,\n  });\n\n  const balances = response[\"data\"];\n  return map(balances, tokens);\n}\n\n// Map API modal to UI modal\nexport function map(balances, configTokens) {\n  let updatedBalances = [];\n\n  for (let i = 0; i < balances.length; i = i + 1) {\n    const balance = balances[i];\n    let updatedBalance = { ...balance };\n    const tokenId = updatedBalance[\"tokenId\"];\n    let token = config.getTokenByTokenId(tokenId, configTokens);\n\n    updatedBalance[\"token\"] = token;\n\n    const totalAmount = balance[\"totalAmount\"];\n\n    // const totalAmountInString = mapAmountInUI(token, totalAmount, configTokens);\n    const totalAmountInString = config.fromWEI(\n      token.symbol,\n      totalAmount,\n      configTokens\n    );\n    updatedBalance[\"totalAmountInString\"] = totalAmountInString;\n\n    const frozenAmount = balance[\"amountLocked\"];\n    // const frozenAmountInString = mapAmountInUI(\n    const frozenAmountInString = config.fromWEI(\n      token.symbol,\n      frozenAmount,\n      configTokens\n    );\n    updatedBalance[\"frozenAmountInString\"] = frozenAmountInString;\n    updatedBalance[\"frozenAmount\"] = frozenAmount;\n\n    if (totalAmount !== \"0\") {\n      let percentage =\n        1 -\n        BigNumber(frozenAmount).dividedBy(BigNumber(totalAmount)).toNumber();\n      percentage = Math.floor(percentage * 100);\n\n      const availableInBigNumber = BigNumber(totalAmount).minus(frozenAmount);\n      const available = mapAmountInUI(\n        token,\n        availableInBigNumber,\n        configTokens\n      );\n      const availableInAssetPanel = config.fromWEI(\n        token.symbol,\n        availableInBigNumber,\n        configTokens\n      );\n      updatedBalance[\"percentage\"] = percentage;\n      updatedBalance[\"available\"] = available;\n      updatedBalance[\"availableInAssetPanel\"] = availableInAssetPanel;\n    } else {\n      updatedBalance[\"percentage\"] = 0;\n      updatedBalance[\"available\"] = Number(0).toFixed(token.precision);\n      updatedBalance[\"availableInAssetPanel\"] = Number(0).toFixed(\n        token.precision\n      );\n    }\n\n    updatedBalances.push(updatedBalance);\n  }\n  return updatedBalances;\n}\n","import { getApiKey } from \"../../lightcone/api/LightconeAPI\";\n\nexport const getLoopringApiKey = async (wallet, account) => {\n    const { signature } = wallet.getApiKey();\n    return getApiKey(\n        {\n            accountId: account.accountId,\n            publicKeyX: account.publicKeyX,\n            publicKeyY: account.publicKeyY,\n        },\n        signature\n    );\n}","import { request } from \"../../../common\";\nimport BigNumber from \"bignumber.js\";\nimport config from \"../../../config\";\n\nexport async function getDepth(market, level, limit, configTokens) {\n  const params = {\n    market,\n    level,\n    limit,\n  };\n  const response = await request({\n    method: \"GET\",\n    url: \"/api/v2/depth\",\n    params,\n  });\n\n  const tokens = market.split(\"-\");\n  const baseToken = tokens[0];\n\n  const depth = response[\"data\"];\n  const bids = depth[\"bids\"].map((arr) => arrToDepth(arr));\n  let updatedBids = [];\n  let aggregatedBidSize = BigNumber(0);\n  for (let i = 0; i < bids.length; i = i + 1) {\n    const bid = bids[i];\n    aggregatedBidSize = aggregatedBidSize.plus(bid.size);\n    let updatedBid = {\n      price: bid.price,\n      size: bid.size,\n      aggregatedSize: config.fromWEI(\n        baseToken,\n        aggregatedBidSize,\n        configTokens\n      ),\n      volume: bid.volume,\n      count: bid.count,\n      sizeInNumber: config.fromWEI(baseToken, bid.size, configTokens),\n    };\n    updatedBids.push(updatedBid);\n  }\n\n  const asks = depth[\"asks\"].map((arr) => arrToDepth(arr));\n  let updatedAsks = [];\n  let aggregateAskSize = BigNumber(0);\n  for (let i = 0; i < asks.length; i = i + 1) {\n    const ask = asks[i];\n    aggregateAskSize = aggregateAskSize.plus(ask.size);\n    let updatedAsk = {\n      price: ask.price,\n      size: ask.size,\n      aggregatedSize: config.fromWEI(baseToken, aggregateAskSize, configTokens),\n      volume: ask.volume,\n      count: ask.count,\n      sizeInNumber: config.fromWEI(baseToken, ask.size, configTokens),\n    };\n    updatedAsks.push(updatedAsk);\n  }\n\n  return {\n    bids: updatedBids,\n    asks: updatedAsks,\n    version: depth[\"version\"],\n  };\n}\n\nexport function arrToDepth(arr) {\n  return {\n    price: arr[0],\n    size: arr[1],\n    volume: arr[2],\n    count: Number(arr[3]),\n  };\n}\n","import { request } from \"../../../common\";\n// import config from '../../../config';\n\nexport async function getMarketInfo() {\n  const response = await request({\n    method: \"GET\",\n    url: \"/api/v2/exchange/markets\",\n  });\n\n  let markets = response[\"data\"];\n  let updatedMarkets = removeDelistedMarkets(markets);\n  response[\"data\"] = updatedMarkets;\n  return response[\"data\"];\n}\n\nfunction removeDelistedMarkets(markets) {\n  let delistedMarkets = [\"TRB-ETH\"];\n  let updatedMarkets = [];\n  for (let i = 0; i < markets.length; i = i + 1) {\n    let market = markets[i];\n    var isDelisted = false;\n    for (let j = 0; j < delistedMarkets.length; j = j + 1) {\n      if (market.market.includes(delistedMarkets[j])) {\n        isDelisted = true;\n      }\n    }\n    if (!isDelisted) {\n      updatedMarkets.push(market);\n    }\n  }\n  return updatedMarkets;\n}\n","import React from \"react\";\nimport Wallet from \"../../lightcone/wallet\";\nimport {\n    lightconeGetAccount,\n    getExchangeInfo,\n    getOrderId,\n    submitOrderToLightcone,\n} from \"../../lightcone/api/LightconeAPI\";\nimport { toast } from \"react-toastify\";\nimport { getTokenInfo } from \"../../lightcone/api/v1/tokeninfo/get\";\nimport { FormattedMessage } from \"react-intl\";\nimport { getBalances } from \"../../lightcone/api/v1/balances/get\";\nimport { getLoopringApiKey } from \"../../utils/loopring\";\nimport BigNumber from \"bignumber.js\";\nimport { getDepth } from \"../../lightcone/api/v1/depth/get\";\nimport { getMarketInfo } from \"../../lightcone/api/v1/marketinfo/get\";\nimport config from \"../../lightcone/config\";\nimport { fromWei, toWei } from \"web3-utils\";\n\n// login\n\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\n\nexport const login = (web3Instance, selectedWeb3Account) => async (\n    dispatch\n) => {\n    try {\n        const wallet = new Wallet(\n            \"MetaMask\",\n            web3Instance,\n            selectedWeb3Account\n        );\n        // custom notification in case the account is not registered\n        let account;\n        try {\n            account = await lightconeGetAccount(selectedWeb3Account);\n        } catch (error) {\n            toast.warn(<FormattedMessage id=\"warn.account.not.found\" />);\n            console.warn(\"account not found\");\n            return;\n        }\n        const exchange = await getExchangeInfo();\n        const { exchangeAddress } = exchange;\n        const { keyPair } = await wallet.generateKeyPair(\n            exchangeAddress,\n            account.keyNonce\n        );\n        if (!keyPair) {\n            // the user most probably aborted the signing\n            console.warn(\"The user aborted the signing process\");\n            return;\n        }\n        const { publicKeyX, publicKeyY } = keyPair;\n        if (\n            account.publicKeyX !== publicKeyX ||\n            account.publicKeyY !== publicKeyY\n        ) {\n            throw new Error(\n                \"api got and locally generated public keys don't match\"\n            );\n        }\n        wallet.keyPair = keyPair;\n        wallet.accountId = account.accountId;\n        dispatch({ type: LOGIN_SUCCESS, account, wallet, exchange });\n    } catch (error) {\n        toast.error(<FormattedMessage id=\"error.login\" />);\n        console.error(\"error initializing loopring\", error);\n    }\n};\n\n// logout\n\nexport const LOGOUT = \"LOGOUT\";\n\nexport const logout = () => ({ type: LOGOUT });\n\n// get supported tokens\n\nexport const GET_SUPPORTED_TOKENS_START = \"GET_SUPPORTED_TOKENS_START\";\nexport const GET_SUPPORTED_TOKENS_END = \"GET_SUPPORTED_TOKENS_END\";\nexport const GET_SUPPORTED_TOKENS_SUCCESS = \"GET_SUPPORTED_TOKENS_SUCCESS\";\n\nexport const getSupportedTokens = (supportedMarkets) => async (dispatch) => {\n    dispatch({ type: GET_SUPPORTED_TOKENS_START });\n    try {\n        const supportedTokens = await getTokenInfo();\n        const filteredSupportedTokens = supportedTokens.reduce(\n            (accumulator, supportedToken) => {\n                const { tokenId } = supportedToken;\n                if (\n                    supportedMarkets.find(\n                        (market) =>\n                            market.quoteTokenId === tokenId ||\n                            market.baseTokenId === tokenId\n                    )\n                ) {\n                    accumulator.push(supportedToken);\n                }\n                return accumulator;\n            },\n            []\n        );\n        dispatch({\n            type: GET_SUPPORTED_TOKENS_SUCCESS,\n            supportedTokens: filteredSupportedTokens,\n        });\n    } catch (error) {\n        toast.error(<FormattedMessage id=\"error.supported.tokens\" />);\n        console.error(\"error getting supported tokens\", error);\n    }\n    dispatch({ type: GET_SUPPORTED_TOKENS_END });\n};\n\n// get supported markets\n\nexport const GET_SUPPORTED_MARKETS_START = \"GET_SUPPORTED_MARKETS_START\";\nexport const GET_SUPPORTED_MARKETS_END = \"GET_SUPPORTED_MARKETS_END\";\nexport const GET_SUPPORTED_MARKETS_SUCCESS = \"GET_SUPPORTED_MARKETS_SUCCESS\";\n\nexport const getSupportedMarkets = () => async (dispatch) => {\n    dispatch({ type: GET_SUPPORTED_MARKETS_START });\n    try {\n        dispatch({\n            type: GET_SUPPORTED_MARKETS_SUCCESS,\n            supportedMarkets: await getMarketInfo(),\n        });\n    } catch (error) {\n        toast.error(<FormattedMessage id=\"error.supported.markets\" />);\n        console.error(\"error getting supported markets\", error);\n    }\n    dispatch({ type: GET_SUPPORTED_MARKETS_END });\n};\n\n// get user balances\n\nexport const GET_USER_BALANCES_START = \"GET_USER_BALANCES_START\";\nexport const GET_USER_BALANCES_END = \"GET_USER_BALANCES_END\";\nexport const GET_USER_BALANCES_SUCCESS = \"GET_USER_BALANCES_SUCCESS\";\n\nexport const getUserBalances = (account, wallet, supportedTokens) => async (\n    dispatch\n) => {\n    dispatch({ type: GET_USER_BALANCES_START });\n    try {\n        const partialBalances = await getBalances(\n            account.accountId,\n            await getLoopringApiKey(wallet, account),\n            supportedTokens\n        );\n        // we process the tokens with no balance too,\n        // saving them with a 0 balance if necessary\n        const allBalances = supportedTokens\n            .filter((supportedToken) => supportedToken.enabled)\n            .reduce((allBalances, supportedToken) => {\n                const supportedTokenId = supportedToken.tokenId;\n                const supportedTokenSymbol = supportedToken.symbol;\n                const matchingBalance = partialBalances.find(\n                    (balance) => balance.tokenId === supportedTokenId\n                );\n                const balance = new BigNumber(\n                    matchingBalance ? matchingBalance.totalAmount : \"0\"\n                );\n                allBalances.push({\n                    id: supportedTokenId,\n                    symbol: supportedTokenSymbol,\n                    name: supportedToken.name,\n                    address: supportedToken.address,\n                    balance,\n                });\n                return allBalances;\n            }, [])\n            .sort((a, b) => b.balance.minus(a.balance).toNumber());\n        dispatch({ type: GET_USER_BALANCES_SUCCESS, balances: allBalances });\n    } catch (error) {\n        toast.error(<FormattedMessage id=\"error.user.balances\" />);\n        console.error(\"error getting user balances\", error);\n    }\n    dispatch({ type: GET_USER_BALANCES_END });\n};\n\n// get current exchange rate\n\nexport const GET_SWAP_DATA_START = \"GET_SWAP_DATA_START\";\nexport const GET_SWAP_DATA_END = \"GET_SWAP_DATA_END\";\nexport const GET_SWAP_DATA_SUCCESS = \"GET_SWAP_DATA_SUCCESS\";\n\nexport const getSwapData = (\n    baseToken,\n    quoteToken,\n    fromAmount,\n    supportedTokens,\n    selling\n) => async (dispatch) => {\n    dispatch({ type: GET_SWAP_DATA_START });\n    try {\n        const market = `${baseToken.symbol}-${quoteToken.symbol}`;\n        const { asks, bids } = await getDepth(market, 0, 1000, supportedTokens);\n        const orders = selling ? bids : asks;\n        const bestPrice = orders[0].price;\n        const estimatedToAmount = selling\n            ? new BigNumber(fromAmount).multipliedBy(bestPrice)\n            : new BigNumber(fromAmount).dividedBy(bestPrice);\n        // fetching all the orders required to fill the requested size\n        const requiredOrders = [];\n        let totalOrdersSize = new BigNumber(\"0\");\n        for (let i = 0; i < orders.length; i++) {\n            const order = orders[i];\n            requiredOrders.push(order);\n            totalOrdersSize = totalOrdersSize.plus(toWei(order.aggregatedSize));\n            if (totalOrdersSize.isGreaterThanOrEqualTo(estimatedToAmount)) {\n                break;\n            }\n        }\n        const averageFillPrice = requiredOrders\n            .reduce(\n                (pricesSum, { price }) => pricesSum.plus(price),\n                new BigNumber(\"0\")\n            )\n            .dividedBy(requiredOrders.length);\n        let slippagePercentage = new BigNumber(averageFillPrice)\n            .minus(bestPrice)\n            .dividedBy(averageFillPrice)\n            .multipliedBy(\"100\");\n        if (selling) {\n            slippagePercentage = slippagePercentage.negated();\n        }\n        dispatch({\n            type: GET_SWAP_DATA_SUCCESS,\n            averageFillPrice: averageFillPrice,\n            slippagePercentage,\n            maximumAmount: orders.reduce(\n                (totalSize, order) =>\n                    totalSize.plus(toWei(order.aggregatedSize)),\n                new BigNumber(\"0\")\n            ),\n        });\n    } catch (error) {\n        toast.error(<FormattedMessage id=\"error.swap.data\" />);\n        console.error(\"error getting swap data\", error);\n    } finally {\n        dispatch({ type: GET_SWAP_DATA_END });\n    }\n};\n\n// perform swap\n\nexport const POST_SWAP_START = \"POST_SWAP_START\";\nexport const POST_SWAP_END = \"POST_SWAP_END\";\nexport const POST_SWAP_SUCCESS = \"POST_SWAP_SUCCESS\";\n\nexport const postSwap = (\n    account,\n    wallet,\n    exchange,\n    fromToken,\n    fromAmount,\n    toToken,\n    toAmount,\n    supportedTokens,\n    selling\n) => async (dispatch) => {\n    dispatch({ type: POST_SWAP_START });\n    try {\n        const apiKey = await getLoopringApiKey(wallet, account);\n        const orderId = await getOrderId(\n            account.accountId,\n            fromToken.tokenId,\n            apiKey\n        );\n        const validSince = new Date().getTime() / 1000 - 3600;\n        const validUntil = new Date().getTime() / 1000 + 3600 * 24 * 10000;\n        const signedOrder = wallet.submitOrder(\n            supportedTokens,\n            exchange.exchangeId,\n            fromToken.address,\n            toToken.address,\n            fromWei(fromAmount),\n            fromWei(toAmount),\n            orderId,\n            validSince,\n            validUntil,\n            config.getLabel(),\n            !selling,\n            config.getChannelId()\n        );\n        if (!signedOrder) {\n            // the user aborted the signing procedure\n            return;\n        }\n        await submitOrderToLightcone(signedOrder, apiKey);\n        toast.success(<FormattedMessage id=\"swap.success\" />);\n        dispatch({ type: POST_SWAP_SUCCESS });\n    } catch (error) {\n        toast.error(<FormattedMessage id=\"error.swap\" />);\n        console.error(\"error performing swap\", error);\n    } finally {\n        dispatch({ type: POST_SWAP_END });\n    }\n};\n","import styled from \"styled-components\";\nimport { Flex, Box } from \"reflexbox\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport const BackgroundFlex = styled(Flex)`\n    border: solid 1px ${(props) => props.theme.border};\n    border-radius: 12px;\n    background: ${(props) => props.theme.foreground};\n    padding: 8px;\n    transition: background 0.3s ease, border 0.3s ease;\n`;\n\nexport const ArrowIcon = styled(FontAwesomeIcon)`\n    color: ${(props) => props.theme.primary};\n`;\n\nexport const SlippageText = styled.span`\n    color: ${(props) => props.theme.error};\n`;\n\nexport const FeeTextBox = styled(Box)`\n    color: ${(props) => props.theme.success};\n`;\n\nexport const PointableBox = styled(Box)`\n    cursor: pointer;\n`;\n","import styled from \"styled-components\";\nimport { Flex, Box } from \"reflexbox\";\n\nexport const RootFlex = styled(Flex)`\n    background: ${(props) => props.theme.background};\n    border: solid 1px ${(props) => props.theme.border};\n    border-radius: 12px;\n    padding: 12px 12px 8px 12px;\n    flex-direction: column;\n    width: 100%;\n    transition: background 0.3s ease, border 0.3s ease;\n`;\n\nexport const HeaderText = styled(Box)`\n    font-size: 16px;\n`;\n\nexport const Input = styled.input`\n    font-size: 32px;\n    color: ${(props) => props.theme.text};\n    font-family: Montserrat, sans-serif;\n    border: none;\n    background: ${(props) => props.theme.background};\n    transition: background 0.3s ease, color 0.3s ease;\n    outline: none;\n    line-height: 40px;\n    width: 100%;\n    height: 40px;\n    ::placeholder {\n        transition: color 0.3s ease;\n        color: ${(props) => props.theme.placeholder};\n    }\n`;\n","import styled from \"styled-components\";\n\nexport const StyledImage = styled.img`\n    border-radius: 50%;\n    width: ${props => props.size}px;\n    height: ${props => props.size}px;\n`;","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { StyledImage } from \"./styled\";\nimport keepLogo from \"../../images/keep.png\";\nimport nestLogo from \"../../images/nest.png\";\nimport pNetworkLogo from \"../../images/pnetwork.png\";\n\nexport const TokenIcon = ({ address, size }) => {\n    const getIconSource = () => {\n        switch (address) {\n            case \"0x85Eee30c52B0b379b046Fb0F85F4f3Dc3009aFEC\": {\n                return keepLogo;\n            }\n            case \"0x04abEdA201850aC0124161F037Efd70c74ddC74C\": {\n                return nestLogo;\n            }\n            case \"0x89Ab32156e46F46D02ade3FEcbe5Fc4243B9AAeD\": {\n                return pNetworkLogo;\n            }\n            default: {\n                // If the address is ETH, we simply fallback to the WETH icon.\n                return `https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/${\n                    address === \"0x0000000000000000000000000000000000000000\"\n                        ? \"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2\"\n                        : address\n                }/logo.png`;\n            }\n        }\n    };\n\n    return <StyledImage alt=\"\" size={size} src={getIconSource()} />;\n};\n\nTokenIcon.propTypes = {\n    address: PropTypes.string.isRequired,\n    size: PropTypes.number.isRequired,\n};\n","import styled from \"styled-components\";\nimport { Flex } from \"reflexbox\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport const RootFlex = styled(Flex)`\n    border: solid 1px ${(props) => props.theme.border};\n    border-radius: 12px;\n    padding: 4px 8px;\n    font-size: 20px;\n    line-height: 20px;\n    background: ${(props) => props.theme.foreground};\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    transition: background 0.3s ease, border 0.3s ease;\n    cursor: pointer;\n`;\n\nexport const ChevronIcon = styled(FontAwesomeIcon)`\n    color: ${(props) => props.theme.primary};\n    font-size: 12px;\n`;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { TokenIcon } from \"../token-icon\";\nimport { Box } from \"reflexbox\";\nimport { RootFlex, ChevronIcon } from \"./styled\";\nimport { faChevronDown } from \"@fortawesome/free-solid-svg-icons\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Spinner } from \"../spinner\";\n\nexport const TokenSelect = ({ token, loading, onClick }) => (\n    <RootFlex alignItems=\"center\" onClick={onClick}>\n        {loading ? (\n            <Box>\n                <Spinner size={20} />\n            </Box>\n        ) : (\n            <>\n                {token ? (\n                    <>\n                        <Box mr=\"4px\" display=\"flex\" alignItems=\"center\">\n                            <TokenIcon\n                                address={token.address || \"ETH\"}\n                                size={20}\n                            />\n                        </Box>\n                        <Box>{token.symbol}</Box>\n                    </>\n                ) : (\n                    <FormattedMessage id=\"token.select.action.select\" />\n                )}\n                <Box ml={2} display=\"flex\" alignItems=\"center\">\n                    <ChevronIcon icon={faChevronDown} />\n                </Box>\n            </>\n        )}\n    </RootFlex>\n);\n\nTokenSelect.propTypes = {\n    token: PropTypes.shape({\n        address: PropTypes.string,\n        symbol: PropTypes.string.isRequired,\n    }),\n    onClick: PropTypes.func.isRequired,\n    loading: PropTypes.bool.isRequired,\n};\n","import styled, { css } from \"styled-components\";\nimport { Flex, Box } from \"reflexbox\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport const OPEN_CLOSE_ANIMATION_DURATION = 300;\n\nexport const RootFlex = styled(Flex)`\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: transparent;\n    justify-content: center;\n    align-items: center;\n    opacity: ${(props) => (props.open ? \"1\" : \"0\")};\n    transform: translateY(${(props) => (props.open ? \"0\" : \"100%\")});\n    transition: ${(props) =>\n        props.open\n            ? `opacity ${OPEN_CLOSE_ANIMATION_DURATION}ms ease`\n            : `transform ${OPEN_CLOSE_ANIMATION_DURATION}ms ease ${OPEN_CLOSE_ANIMATION_DURATION}ms, opacity ${OPEN_CLOSE_ANIMATION_DURATION}ms ease`};\n    z-index: 20;\n`;\n\nexport const ContentFlex = styled(Flex)`\n    background: ${(props) => props.theme.background};\n    transition: color 0.3s ease, background 0.3s ease;\n    border-radius: 12px;\n    max-height: 70%;\n    overflow: auto;\n    box-shadow: 0px 30px 62px 0px ${(props) => props.theme.shadow};\n`;\n\nexport const ListFlex = styled(Flex)`\n    overflow: auto;\n`;\n\nexport const SearchFlex = styled(Flex)`\n    width: 100%;\n    height: 48px;\n    min-height: 48px;\n    align-items: center;\n    background: ${(props) => props.theme.background};\n    padding-top: 4px;\n    padding-left: 24px;\n    padding-right: 24px;\n    font-size: 20px;\n    color: ${(props) => props.theme.text};\n    box-shadow: 0px 4px 8px 4px ${(props) => props.theme.background};\n    transition: color 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;\n    z-index: 12;\n`;\n\nexport const Input = styled.input`\n    font-size: 16px;\n    color: ${(props) => props.theme.text};\n    font-family: Montserrat, sans-serif;\n    border: none;\n    background: ${(props) => props.theme.background};\n    outline: none;\n    width: 100%;\n    transition: color 0.3s ease, background 0.3s ease;\n    ::placeholder {\n        font-family: Montserrat, sans-serif;\n        color: ${(props) => props.theme.placeholder};\n    }\n`;\n\nexport const RowFlex = styled(Flex)`\n    transition: background 0.3s ease, color 0.3s ease;\n    cursor: pointer;\n    background: ${(props) =>\n        props.selected ? props.theme.primary : props.theme.background};\n    color: ${(props) =>\n        props.selected ? props.theme.textInverted : props.theme.text};\n    border-radius: 12px;\n    ${(props) =>\n        !props.selected &&\n        css`\n            :hover {\n                background: ${(props) => props.theme.foreground};\n            }\n        `};\n`;\n\nexport const PointableBox = styled(Box)`\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n`;\n\nexport const EmptyIcon = styled(FontAwesomeIcon)`\n    font-size: 60px;\n    color: ${(props) => props.theme.error};\n`;\n\nexport const EmptyTextBox = styled(Box)`\n    color: ${(props) => props.theme.error};\n`;\n\nexport const SecondaryTextBox = styled(Box)`\n    font-size: 12px;\n    color: ${(props) =>\n        props.selected ? props.theme.textInverted : props.theme.textLight};\n    transition: color 0.3s ease;\n`;\n","import styled from \"styled-components\";\n\nexport const FullScreenOverlay = styled.div`\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: ${(props) => props.theme.shadow};\n    opacity: ${(props) => (props.open ? \"1\" : \"0\")};\n    transform: translateY(${(props) => (props.open ? \"0\" : \"150%\")});\n    transition: ${(props) =>\n            props.open\n                ? \"opacity 0.3s ease\"\n                : \"transform 0.3s ease 0.3s, opacity 0.3s ease\"},\n        background 0.3s ease;\n`;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Web3 from \"web3\";\nimport BigNumber from \"bignumber.js\";\nimport { Flex, Box } from \"reflexbox\";\nimport { TokenIcon } from \"../token-icon\";\nimport {\n    RowFlex,\n    RootFlex,\n    ContentFlex,\n    ListFlex,\n    SearchFlex,\n    Input,\n    EmptyIcon,\n    EmptyTextBox,\n    SecondaryTextBox,\n    PointableBox,\n    OPEN_CLOSE_ANIMATION_DURATION,\n} from \"./styled\";\nimport { FullScreenOverlay } from \"../full-screen-overlay\";\nimport { FormattedMessage, useIntl } from \"react-intl\";\nimport {\n    faTimes,\n    faSearch,\n    faExclamationTriangle,\n    faSync,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { useRef } from \"react\";\nimport { Spinner } from \"../spinner\";\n\nconst {\n    utils: { fromWei },\n} = Web3;\n\nexport const TokenModal = ({\n    loading,\n    open,\n    onClose,\n    onRefresh,\n    onChange,\n    supportedTokens,\n    balances,\n    selected,\n    loggedIn,\n}) => {\n    const { formatMessage } = useIntl();\n    const contentRef = useRef(null);\n\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const [tokenDataset, setTokenDataset] = useState(supportedTokens);\n    const [balancesInEther, setBalancesInEther] = useState({});\n\n    useEffect(() => {\n        let dataset = supportedTokens;\n        if (searchTerm) {\n            dataset = dataset.filter(({ symbol, name, address }) => {\n                const lowerCasedSearchTerm = searchTerm.toLowerCase();\n                return (\n                    symbol.toLowerCase().includes(lowerCasedSearchTerm) ||\n                    name.toLowerCase().includes(lowerCasedSearchTerm) ||\n                    address.toLowerCase().includes(lowerCasedSearchTerm)\n                );\n            });\n        }\n        if (balancesInEther) {\n            dataset = dataset.sort(\n                ({ address: firstAddress }, { address: secondAddress }) => {\n                    const firstTokenBalance = balancesInEther[firstAddress];\n                    const secondTokenBalance = balancesInEther[secondAddress];\n                    return firstTokenBalance && secondTokenBalance\n                        ? secondTokenBalance.minus(firstTokenBalance).toNumber()\n                        : 0;\n                }\n            );\n        }\n        setTokenDataset(dataset);\n    }, [searchTerm, balancesInEther, supportedTokens]);\n\n    useEffect(() => {\n        if (!balances || balances.length === 0) {\n            return;\n        }\n        const balancesInEther = balances.reduce(\n            (balancesInEther, { address, balance }) => {\n                balancesInEther[address] = new BigNumber(\n                    fromWei(balance.toFixed())\n                );\n                return balancesInEther;\n            },\n            {}\n        );\n        setBalancesInEther(balancesInEther);\n    }, [balances]);\n\n    const getClickHandler = (token) => () => {\n        onChange(token);\n        handleLocalClose();\n    };\n\n    const handleLocalClose = useCallback(() => {\n        onClose();\n        setTimeout(() => {\n            setTokenDataset(supportedTokens);\n            setSearchTerm(\"\");\n        }, OPEN_CLOSE_ANIMATION_DURATION);\n    }, [onClose, supportedTokens]);\n\n    const handleLocalCloseOnOutsideClick = useCallback(\n        (event) => {\n            if (!contentRef.current.contains(event.target)) {\n                handleLocalClose();\n            }\n        },\n        [handleLocalClose]\n    );\n\n    const handleSearchTermChange = useCallback((event) => {\n        setSearchTerm(event.target.value);\n    }, []);\n\n    return (\n        <>\n            <FullScreenOverlay open={open} />\n            <RootFlex open={open} onClick={handleLocalCloseOnOutsideClick}>\n                <ContentFlex\n                    ref={contentRef}\n                    width={[\"90%\", \"60%\", \"50%\", \"30%\"]}\n                    flexDirection=\"column\"\n                >\n                    <SearchFlex mt=\"4px\">\n                        <Box mr={3}>\n                            <FontAwesomeIcon icon={faSearch} />\n                        </Box>\n                        <Box flex={1}>\n                            <Input\n                                value={searchTerm}\n                                onChange={handleSearchTermChange}\n                                placeholder={formatMessage({\n                                    id: \"token.modal.searchbar.placeholder\",\n                                })}\n                            />\n                        </Box>\n                        {loggedIn && (\n                            <PointableBox ml={3} p={2} minWidth=\"auto\">\n                                <FontAwesomeIcon\n                                    icon={faSync}\n                                    onClick={onRefresh}\n                                />\n                            </PointableBox>\n                        )}\n                        <PointableBox ml={3} p={2}>\n                            <FontAwesomeIcon\n                                icon={faTimes}\n                                onClick={handleLocalClose}\n                            />\n                        </PointableBox>\n                    </SearchFlex>\n                    {loading ? (\n                        <Flex justifyContent=\"center\" mb={4} mt={2}>\n                            <Box>\n                                <Spinner size={40} />\n                            </Box>\n                        </Flex>\n                    ) : (\n                        <>\n                            <ListFlex\n                                flexDirection=\"column\"\n                                px=\"12px\"\n                                py=\"12px\"\n                            >\n                                {tokenDataset.length > 0 ? (\n                                    tokenDataset.map((token) => {\n                                        const { address, symbol, name } = token;\n                                        const currentlySelected =\n                                            selected === token;\n                                        return (\n                                            <RowFlex\n                                                key={address}\n                                                alignItems=\"center\"\n                                                py={16}\n                                                pl=\"12px\"\n                                                pr=\"16px\"\n                                                onClick={getClickHandler(token)}\n                                                selected={currentlySelected}\n                                            >\n                                                <Box mr={3}>\n                                                    <TokenIcon\n                                                        address={address}\n                                                        size={32}\n                                                    />\n                                                </Box>\n                                                <Flex\n                                                    alignItems=\"center\"\n                                                    justifyContent=\"space-between\"\n                                                    flex={1}\n                                                >\n                                                    <Flex flexDirection=\"column\">\n                                                        <Box mb=\"2px\">\n                                                            {symbol}\n                                                        </Box>\n                                                        <SecondaryTextBox\n                                                            selected={\n                                                                currentlySelected\n                                                            }\n                                                        >\n                                                            {name}\n                                                        </SecondaryTextBox>\n                                                    </Flex>\n                                                    <Box>\n                                                        {balancesInEther &&\n                                                        balancesInEther[\n                                                            address\n                                                        ] &&\n                                                        balancesInEther[\n                                                            address\n                                                        ].isGreaterThan(\n                                                            \"0.0001\"\n                                                        )\n                                                            ? balancesInEther[\n                                                                  address\n                                                              ]\n                                                                  .decimalPlaces(\n                                                                      4\n                                                                  )\n                                                                  .toString()\n                                                            : \"-\"}\n                                                    </Box>\n                                                </Flex>\n                                            </RowFlex>\n                                        );\n                                    })\n                                ) : (\n                                    <Flex\n                                        flexDirection=\"column\"\n                                        alignItems=\"center\"\n                                        my={3}\n                                        px={3}\n                                    >\n                                        <Box mb={3}>\n                                            <EmptyIcon\n                                                icon={faExclamationTriangle}\n                                            />\n                                        </Box>\n                                        <EmptyTextBox textAlign=\"center\" mb={3}>\n                                            <FormattedMessage id=\"token.modal.empty\" />\n                                        </EmptyTextBox>\n                                    </Flex>\n                                )}\n                            </ListFlex>\n                        </>\n                    )}\n                </ContentFlex>\n            </RootFlex>\n        </>\n    );\n};\n\nTokenModal.propTypes = {\n    open: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onRefresh: PropTypes.func.isRequired,\n    onChange: PropTypes.func.isRequired,\n    balances: PropTypes.array.isRequired,\n    selected: PropTypes.object,\n    loading: PropTypes.bool.isRequired,\n    loggedIn: PropTypes.bool.isRequired,\n};\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { RootFlex, HeaderText, Input } from \"./styled\";\nimport { Box, Flex } from \"reflexbox\";\nimport BigNumber from \"bignumber.js\";\nimport { fromWei, toWei } from \"web3-utils\";\nimport { FormattedMessage } from \"react-intl\";\nimport { TokenSelect } from \"../token-select\";\nimport { TokenModal } from \"../token-modal\";\n\nexport const TokenSpecifier = ({\n    variant,\n    amount,\n    token,\n    onAmountChange,\n    onBalancesRefresh,\n    onTokenChange,\n    supportedTokens,\n    balances,\n    loadingSupportedTokens,\n    loadingBalances,\n    loggedIn,\n}) => {\n    const [modalOpen, setModalOpen] = useState(false);\n    const [stringAmount, setStringAmount] = useState(\"\");\n\n    useEffect(() => {\n        const rollingCommaStringAmount = /^[0-9]*?\\.0*$/.test(stringAmount);\n        if (\n            (!rollingCommaStringAmount && amount === \"0\") ||\n            (!rollingCommaStringAmount &&\n                stringAmount === \".\" &&\n                amount === \"0\")\n        ) {\n            setStringAmount(\"0\");\n        } else if (!rollingCommaStringAmount) {\n            // the balance check only applies to the from field, and when the user is logged in\n            let weiAmount = new BigNumber(amount);\n            if (variant === \"from\" && loggedIn) {\n                const exchangeBalance = balances.find(\n                    (balance) => balance.id === token.tokenId\n                );\n                const tokenMaximumExchangeBalance =\n                    exchangeBalance && exchangeBalance.balance;\n                if (\n                    variant === \"from\" &&\n                    tokenMaximumExchangeBalance &&\n                    weiAmount.isGreaterThan(tokenMaximumExchangeBalance)\n                ) {\n                    weiAmount = tokenMaximumExchangeBalance;\n                    onAmountChange(weiAmount.toFixed());\n                }\n            }\n            setStringAmount(\n                new BigNumber(fromWei(weiAmount.decimalPlaces(0).toFixed()))\n                    .decimalPlaces(5)\n                    .toString()\n            );\n        }\n    }, [\n        amount,\n        balances,\n        loggedIn,\n        onAmountChange,\n        stringAmount,\n        token,\n        variant,\n    ]);\n\n    const handleAmountChange = useCallback(\n        (event) => {\n            const newAmount = event.target.value;\n            let numericAmount = parseFloat(newAmount);\n            if (\n                !newAmount ||\n                newAmount.indexOf(\",\") >= 0 ||\n                newAmount.indexOf(\" \") >= 0 ||\n                newAmount.indexOf(\"-\") >= 0\n            ) {\n                onAmountChange(\"0\");\n                return;\n            }\n            if (/\\.{2,}/.test(newAmount) || newAmount.split(\".\").length > 2) {\n                return;\n            }\n            setStringAmount(newAmount);\n            let properNumericValue = isNaN(numericAmount)\n                ? \"0\"\n                : new BigNumber(numericAmount.toString())\n                      .decimalPlaces(18)\n                      .toString();\n            const userTokenBalance =\n                token &&\n                balances.find((balance) => balance.id === token.tokenId);\n            if (\n                userTokenBalance &&\n                userTokenBalance.balance &&\n                userTokenBalance.balance.isLessThan(toWei(properNumericValue))\n            ) {\n                properNumericValue = fromWei(\n                    userTokenBalance.balance.decimalPlaces(18).toFixed()\n                );\n            }\n            onAmountChange(toWei(properNumericValue));\n        },\n        [balances, onAmountChange, token]\n    );\n\n    const handleSelectClick = useCallback(() => {\n        setModalOpen(true);\n    }, []);\n\n    const handleModalClose = useCallback(() => {\n        setModalOpen(false);\n    }, []);\n\n    const handleTokenChange = useCallback(\n        (token) => {\n            onTokenChange(token);\n        },\n        [onTokenChange]\n    );\n\n    return (\n        <>\n            <RootFlex>\n                <HeaderText width=\"100%\" mb={2}>\n                    <FormattedMessage id={`token.specifier.${variant}`} />\n                </HeaderText>\n                <Flex width=\"100%\">\n                    <Box flex=\"1\">\n                        <Input\n                            placeholder=\"0.0\"\n                            value={\n                                stringAmount && stringAmount !== \"0\"\n                                    ? stringAmount\n                                    : \"\"\n                            }\n                            onChange={handleAmountChange}\n                        />\n                    </Box>\n                    <Box display=\"flex\" alignItems=\"center\" ml={2}>\n                        <TokenSelect\n                            token={token}\n                            onClick={handleSelectClick}\n                            loading={loadingSupportedTokens}\n                        />\n                    </Box>\n                </Flex>\n            </RootFlex>\n            <TokenModal\n                open={modalOpen}\n                onClose={handleModalClose}\n                onRefresh={onBalancesRefresh}\n                onChange={handleTokenChange}\n                supportedTokens={supportedTokens}\n                selected={token}\n                balances={balances}\n                loading={loadingBalances || loadingSupportedTokens}\n                loggedIn={loggedIn}\n            />\n        </>\n    );\n};\n\nTokenSpecifier.propTypes = {\n    variant: PropTypes.oneOf([\"from\", \"to\"]),\n    amount: PropTypes.string.isRequired,\n    token: PropTypes.object,\n    onAmountChange: PropTypes.func.isRequired,\n    onBalancesRefresh: PropTypes.func.isRequired,\n    onTokenChange: PropTypes.func.isRequired,\n    supportedTokens: PropTypes.array.isRequired,\n    loadingSupportedTokens: PropTypes.bool.isRequired,\n    loadingBalances: PropTypes.bool.isRequired,\n    loggedIn: PropTypes.bool.isRequired,\n};\n","import React, { useEffect, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Flex, Box } from \"reflexbox\";\nimport {\n    BackgroundFlex,\n    ArrowIcon,\n    SlippageText,\n    FeeTextBox,\n    PointableBox,\n} from \"./styled\";\nimport { TokenSpecifier } from \"../../components/token-specifier\";\nimport { useState } from \"react\";\nimport {\n    faArrowDown,\n    faExchangeAlt,\n    faLockOpen,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Button } from \"../../components/button\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getSwapData, postSwap, getUserBalances } from \"../../actions/loopring\";\nimport BigNumber from \"bignumber.js\";\nimport { fromWei, toWei } from \"web3-utils\";\nimport { Spinner } from \"../../components/spinner\";\nimport { useDebouncedCallback } from \"use-debounce\";\n\nexport const Swapper = ({ onConnectWalletClick }) => {\n    const dispatch = useDispatch();\n\n    const {\n        loopringAccount,\n        loopringExchange,\n        loopringWallet,\n        supportedTokens,\n        loadingSupportedTokens,\n        loadingBalances,\n        supportedMarkets,\n        balances,\n        loggedIn,\n        swapData,\n        loadingSwapData,\n        loadingSwapSubmission,\n    } = useSelector((state) => ({\n        loopringAccount: state.loopring.account,\n        loopringExchange: state.loopring.exchange,\n        loopringWallet: state.loopring.wallet,\n        supportedTokens: state.loopring.supportedTokens.data,\n        loadingSupportedTokens: !!state.loopring.supportedTokens.loadings,\n        loadingBalances: !!state.loopring.balances.loadings,\n        supportedMarkets: state.loopring.supportedMarkets.data,\n        balances: state.loopring.balances.data,\n        loggedIn: !!state.loopring.account,\n        swapData: state.loopring.swap.data,\n        loadingSwapData: !!state.loopring.swap.loadings,\n        loadingSwapSubmission: !!state.loopring.swapSubmission.loadings,\n    }));\n\n    const [fromToken, setFromToken] = useState(null);\n    const [fromAmount, setFromAmount] = useState(\"0\");\n    const [toToken, setToToken] = useState(null);\n    const [toAmount, setToAmount] = useState(\"0\");\n    const [filteredToTokens, setFilteredToTokens] = useState([]);\n    const [compatibleMarkets, setCompatibleMarkets] = useState([]);\n    const [changingToAmount, setChangingToAmount] = useState(false);\n    const [changingFromAmount, setChangingFromAmount] = useState(false);\n    const [changingToToken, setChangingToToken] = useState(false);\n    const [changingFromToken, setChangingFromToken] = useState(false);\n    const [selling, setSelling] = useState(false);\n\n    const [debouncedGetSwapData] = useDebouncedCallback(\n        (fromToken, toToken, fromAmount, supportedTokens, selling) => {\n            dispatch(\n                getSwapData(\n                    fromToken,\n                    toToken,\n                    fromAmount,\n                    supportedTokens,\n                    selling\n                )\n            );\n        },\n        500\n    );\n\n    // set ether as the default \"from\" token\n    useEffect(() => {\n        if (supportedTokens && supportedTokens.length > 0 && !fromToken) {\n            setFromToken(\n                supportedTokens.find((token) => token.symbol === \"ETH\")\n            );\n        }\n    }, [fromToken, supportedTokens]);\n\n    // on \"from\" token change, find out the compatible markets\n    useEffect(() => {\n        if (supportedMarkets && supportedMarkets.length > 0 && fromToken) {\n            setCompatibleMarkets(\n                supportedMarkets.filter(\n                    (market) =>\n                        market.quoteTokenId === fromToken.tokenId ||\n                        market.baseTokenId === fromToken.tokenId\n                )\n            );\n        }\n    }, [fromToken, supportedMarkets]);\n\n    // on \"from\" token change, we need to find the compatible \"to\" tokens based on available markets.\n    // Plus, we reset the currently selected \"to\" token if it's not compatible with the current \"from\" one.\n    useEffect(() => {\n        if (supportedMarkets && supportedMarkets.length > 0 && fromToken) {\n            const filteredToTokens = supportedTokens.filter(\n                (token) =>\n                    token.tokenId !== fromToken.tokenId &&\n                    compatibleMarkets.find(\n                        (market) =>\n                            market.baseTokenId === token.tokenId ||\n                            market.quoteTokenId === token.tokenId\n                    )\n            );\n            if (\n                filteredToTokens &&\n                filteredToTokens.length > 0 &&\n                toToken &&\n                !filteredToTokens.find(\n                    (token) => token.tokenId === toToken.tokenId\n                )\n            ) {\n                setToToken(filteredToTokens[0]);\n                setToAmount(\"0\");\n            }\n            setFilteredToTokens(filteredToTokens);\n        }\n    }, [\n        compatibleMarkets,\n        fromToken,\n        supportedMarkets,\n        supportedTokens,\n        toToken,\n    ]);\n\n    // on valid \"from\" and \"to\" tokens setting, we need to find their current exchange rate\n    useEffect(() => {\n        if (\n            supportedTokens &&\n            supportedTokens.length > 0 &&\n            fromToken &&\n            fromAmount &&\n            toToken &&\n            // when the exchange rate is used to calculate the expected to or from token amount,\n            // and that is enforced on the component's state, this effect is invoked again and again\n            // until the currently fetched exchange rate is the same as the previous.\n            // In particularly traded markets, where the order book changes often, this produces an\n            // annoying flickering effect. We avoid it by calculating from and to amounts only if\n            // an actual user interacted with the form (NOT when the app updates the to and\n            // from amounts after swap-details-related calculations)\n            (changingFromAmount ||\n                changingToAmount ||\n                changingFromToken ||\n                changingToToken)\n        ) {\n            const tradedMarket = compatibleMarkets.find(\n                (market) =>\n                    (market.baseTokenId === toToken.tokenId &&\n                        market.quoteTokenId === fromToken.tokenId) ||\n                    (market.baseTokenId === fromToken.tokenId &&\n                        market.quoteTokenId === toToken.tokenId)\n            );\n            if (!tradedMarket) {\n                return;\n            }\n            debouncedGetSwapData(\n                supportedTokens.find(\n                    (token) => token.tokenId === tradedMarket.baseTokenId\n                ),\n                supportedTokens.find(\n                    (token) => token.tokenId === tradedMarket.quoteTokenId\n                ),\n                fromAmount,\n                supportedTokens,\n                selling\n            );\n        }\n    }, [\n        changingFromAmount,\n        changingFromToken,\n        changingToAmount,\n        changingToToken,\n        compatibleMarkets,\n        debouncedGetSwapData,\n        fromAmount,\n        fromToken,\n        selling,\n        supportedTokens,\n        toToken,\n    ]);\n\n    // when the exchange rate is fetched, we need to calculate the expected\n    // token amount to receive based on it\n    useEffect(() => {\n        if (\n            swapData &&\n            swapData.averageFillPrice &&\n            fromToken &&\n            fromAmount &&\n            toToken\n        ) {\n            const referenceAmount = changingToAmount ? toAmount : fromAmount;\n            let partialAmount = new BigNumber(fromWei(referenceAmount));\n            if (changingToAmount) {\n                partialAmount = selling\n                    ? partialAmount.dividedBy(swapData.averageFillPrice)\n                    : partialAmount.multipliedBy(swapData.averageFillPrice);\n            } else {\n                partialAmount = selling\n                    ? partialAmount.multipliedBy(swapData.averageFillPrice)\n                    : partialAmount.dividedBy(swapData.averageFillPrice);\n            }\n            const newAmount = toWei(partialAmount.decimalPlaces(18).toString());\n            if (changingToAmount && newAmount !== fromAmount) {\n                // if the updated to amount is more than the maximum one based on\n                // the order book, the maximum possible value is set\n                if (\n                    swapData.maximumAmount &&\n                    new BigNumber(newAmount)\n                        .dividedBy(swapData.averageFillPrice)\n                        .isGreaterThan(swapData.maximumAmount)\n                ) {\n                    // FIXME: this could cause problems if a given market is particularily illuquid.\n                    // In some cases from amount will not have a significant decimal in the first 5 spots,\n                    // and since the UI doesn't support this, chances are the user will see 0 in the from\n                    // amount from the app, while the internal component state has a minuscule but present\n                    // from amount. It should only happen in extreme cases.\n                    let adjustedFromAmount = swapData.maximumAmount;\n                    if (selling) {\n                        adjustedFromAmount = adjustedFromAmount.dividedBy(\n                            swapData.averageFillPrice\n                        );\n                    } else {\n                        adjustedFromAmount = adjustedFromAmount.multipliedBy(\n                            swapData.averageFillPrice\n                        );\n                    }\n                    setFromAmount(\n                        adjustedFromAmount.decimalPlaces(0).toFixed()\n                    );\n                } else {\n                    setFromAmount(newAmount);\n                }\n            } else if (!changingToAmount && newAmount !== toAmount) {\n                // If the new from amount would bring, based on the current average\n                // fill price, the to token amount to be bigger than the maximum allowed\n                // quantity, the from amount is adjusted accordingly\n                if (\n                    swapData.maximumAmount &&\n                    swapData.maximumAmount.isLessThan(newAmount)\n                ) {\n                    // FIXME: this could cause problems if a given market is particularily illuquid.\n                    // In some cases from amount will not have a significant decimal in the first 5 spots,\n                    // and since the UI doesn't support this, chances are the user will see 0 in the from\n                    // amount from the app, while the internal component state has a minuscule but present\n                    // from amount. It should only happen in extreme cases.\n                    let adjustedFromAmount = swapData.maximumAmount;\n                    if (selling) {\n                        adjustedFromAmount = adjustedFromAmount.dividedBy(\n                            swapData.averageFillPrice\n                        );\n                    } else {\n                        adjustedFromAmount = adjustedFromAmount.multipliedBy(\n                            swapData.averageFillPrice\n                        );\n                    }\n                    setFromAmount(\n                        adjustedFromAmount.decimalPlaces(0).toFixed()\n                    );\n                    setToAmount(swapData.maximumAmount.toFixed());\n                } else {\n                    setToAmount(newAmount);\n                }\n            }\n            setChangingToAmount(false);\n            setChangingFromAmount(false);\n            setChangingToToken(false);\n            setChangingFromToken(false);\n        }\n    }, [\n        changingToAmount,\n        fromAmount,\n        fromToken,\n        selling,\n        swapData,\n        toAmount,\n        toToken,\n    ]);\n\n    // on \"from\" or \"to\" token changes, we need to determine if the user is buying or selling a given market.\n    // We do this by checking if the corresponding market has the \"from\" token as a base or quote currency.\n    // If the \"from\" token is a quote currency, the user is buying, and vice-versa.\n    useEffect(() => {\n        if (fromToken && toToken) {\n            setSelling(\n                !!compatibleMarkets.find(\n                    (market) =>\n                        market.baseTokenId === fromToken.tokenId &&\n                        market.quoteTokenId === toToken.tokenId\n                )\n            );\n        }\n    }, [compatibleMarkets, fromToken, toToken]);\n\n    const handleFromTokenChange = useCallback((token) => {\n        setChangingToToken(false);\n        setChangingFromToken(true);\n        setFromToken(token);\n    }, []);\n\n    const handleFromAmountChange = useCallback((amount) => {\n        setChangingToAmount(false);\n        setChangingFromAmount(true);\n        setFromAmount(amount);\n    }, []);\n\n    const handleToTokenChange = useCallback((token) => {\n        setChangingToToken(true);\n        setChangingFromToken(false);\n        setToToken(token);\n    }, []);\n\n    const handleToAmountChange = useCallback((amount) => {\n        setChangingToAmount(true);\n        setChangingFromAmount(false);\n        setToAmount(amount);\n    }, []);\n\n    const handleSwap = useCallback(() => {\n        dispatch(\n            postSwap(\n                loopringAccount,\n                loopringWallet,\n                loopringExchange,\n                fromToken,\n                fromAmount,\n                toToken,\n                toAmount,\n                supportedTokens,\n                selling\n            )\n        );\n    }, [\n        dispatch,\n        fromAmount,\n        fromToken,\n        loopringAccount,\n        loopringExchange,\n        loopringWallet,\n        selling,\n        supportedTokens,\n        toAmount,\n        toToken,\n    ]);\n\n    const handleBalancesRefresh = useCallback(() => {\n        if (loggedIn) {\n            dispatch(\n                getUserBalances(\n                    loopringAccount,\n                    loopringWallet,\n                    supportedTokens\n                )\n            );\n        }\n    }, [dispatch, loggedIn, loopringAccount, loopringWallet, supportedTokens]);\n\n    const handleSwitchSwapAttributes = useCallback(() => {\n        setFromToken(toToken);\n        setToToken(fromToken);\n    }, [fromToken, toToken]);\n\n    return (\n        <Flex flexDirection=\"column\">\n            <BackgroundFlex flexDirection=\"column\" alignItems=\"center\" mb={4}>\n                <Box>\n                    <TokenSpecifier\n                        variant=\"from\"\n                        amount={fromAmount}\n                        token={fromToken}\n                        onAmountChange={handleFromAmountChange}\n                        onBalancesRefresh={handleBalancesRefresh}\n                        onTokenChange={handleFromTokenChange}\n                        supportedTokens={supportedTokens}\n                        balances={balances}\n                        loadingSupportedTokens={loadingSupportedTokens}\n                        loadingBalances={loadingBalances}\n                        loggedIn={loggedIn}\n                    />\n                </Box>\n                <PointableBox\n                    display=\"flex\"\n                    justifyContent=\"center\"\n                    alignItems=\"center\"\n                    height={36}\n                    onClick={handleSwitchSwapAttributes}\n                    p={2}\n                >\n                    <ArrowIcon icon={faArrowDown} />\n                </PointableBox>\n                <Box mb=\"12px\">\n                    <TokenSpecifier\n                        variant=\"to\"\n                        amount={toAmount}\n                        token={toToken}\n                        onAmountChange={handleToAmountChange}\n                        onBalancesRefresh={handleBalancesRefresh}\n                        onTokenChange={handleToTokenChange}\n                        supportedTokens={filteredToTokens}\n                        balances={balances}\n                        loadingSupportedTokens={loadingSupportedTokens}\n                        loadingBalances={loadingBalances}\n                        loggedIn={loggedIn}\n                    />\n                </Box>\n                <Flex\n                    mb=\"8px\"\n                    justifyContent=\"space-between\"\n                    alignItems=\"center\"\n                    px={2}\n                    width=\"100%\"\n                >\n                    <Box>\n                        <FormattedMessage id=\"swapper.price\" />\n                    </Box>\n                    <Box>\n                        {loadingSwapData ? (\n                            <Spinner size={16} />\n                        ) : swapData && swapData.averageFillPrice ? (\n                            `${(selling\n                                ? swapData.averageFillPrice\n                                : new BigNumber(\"1\").dividedBy(\n                                      swapData.averageFillPrice\n                                  )\n                            )\n                                .decimalPlaces(4)\n                                .toString()} ${toToken.symbol}`\n                        ) : (\n                            \"-\"\n                        )}\n                    </Box>\n                </Flex>\n                <Flex\n                    mb=\"8px\"\n                    justifyContent=\"space-between\"\n                    alignItems=\"center\"\n                    px={2}\n                    width=\"100%\"\n                >\n                    <Box>\n                        <FormattedMessage id=\"swapper.slippage\" />\n                    </Box>\n                    <Box>\n                        {loadingSwapData ? (\n                            <Spinner size={16} />\n                        ) : swapData && swapData.slippagePercentage ? (\n                            <SlippageText>\n                                {swapData.slippagePercentage\n                                    .decimalPlaces(2)\n                                    .toString()}\n                                %\n                            </SlippageText>\n                        ) : (\n                            \"-\"\n                        )}\n                    </Box>\n                </Flex>\n                <Flex\n                    justifyContent=\"space-between\"\n                    alignItems=\"center\"\n                    px={2}\n                    width=\"100%\"\n                >\n                    <Box>\n                        <FormattedMessage id=\"swapper.fee\" />\n                    </Box>\n                    {/* TODO: this should be dynamically fetched */}\n                    <FeeTextBox>0</FeeTextBox>\n                </Flex>\n            </BackgroundFlex>\n            <Box display=\"flex\" justifyContent=\"center\" mb={4}>\n                <Button\n                    faIcon={loggedIn ? faExchangeAlt : faLockOpen}\n                    size=\"large\"\n                    loading={loggedIn && loadingSwapSubmission}\n                    disabled={\n                        loggedIn &&\n                        (!fromToken ||\n                            !fromAmount ||\n                            fromAmount === \"0\" ||\n                            !toToken ||\n                            !toAmount ||\n                            toAmount === \"0\")\n                    }\n                    onClick={loggedIn ? handleSwap : onConnectWalletClick}\n                >\n                    <FormattedMessage\n                        id={`swapper.action.${loggedIn ? \"swap\" : \"connect\"}`}\n                    />\n                </Button>\n            </Box>\n        </Flex>\n    );\n};\n\nSwapper.propTypes = {\n    onConnectWalletClick: PropTypes.func.isRequired,\n};\n","export const SWITCH_LANGUAGE = \"CHANGE_LANGUAGE\";\n\nexport const switchLanguage = (language) => ({\n    type: SWITCH_LANGUAGE,\n    language,\n});\n","import { createGlobalStyle } from 'styled-components';\n\nconst BrowserGlobalStyles = createGlobalStyle`\n  @font-face {\n    font-family: 'Montserrat-Regular';\n    font-weight: normal;\n    font-style: normal;\n    src: local('Montserrat-Regular'),\n      url(/assets/fonts/Montserrat/Montserrat-Regular.ttf) format('truetype');\n  }\n\n  @font-face {\n    font-family: 'Montserrat-Italic';\n    font-weight: normal;\n    font-style: normal;\n    src: local('Montserrat-Italic'),\n      url(/assets/fonts/Montserrat/Montserrat-Italic.ttf) format('truetype');\n  }\n\n  @font-face {\n    font-family: 'Montserrat-Medium';\n    font-weight: normal;\n    font-style: normal;\n    src: local('Montserrat-Medium'),\n      url(/assets/fonts/Montserrat/Montserrat-Medium.ttf) format('truetype');\n  }\n\n  @font-face {\n    font-family: 'Montserrat-Bold';\n    font-weight: bold;\n    font-style: normal;\n    src: local('Montserrat-Bold'),\n      url(/assets/fonts/Montserrat/Montserrat-Bold.ttf) format('truetype');\n  }\n\n  @font-face {\n    font-family: 'Montserrat-Light';\n    font-weight: 300;\n    font-style: normal;\n    src: local('Montserrat-Light'),\n      url(/assets/fonts/Montserrat/Montserrat-Light.ttf) format('truetype');\n  }\n\n  html {\n    font-size: 13px;\n  }\n\n\n`;\n\nexport default BrowserGlobalStyles;","import React, { useState, useEffect } from \"react\";\nimport { Layout } from \"../../components/layout\";\nimport { ThemeProvider } from \"styled-components\";\nimport { GlobalStyle } from \"./styled.js\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport MewConnect from \"@myetherwallet/mewconnect-web-client\";\nimport Web3Modal from \"web3modal\";\nimport { INFURA_URL } from \"../../env\";\nimport { useCallback } from \"react\";\nimport { Drawer } from \"../../components/drawer\";\nimport { initializeWeb3 } from \"../../actions/web3\";\nimport { ToastContainer, Slide } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport {\n    login,\n    getSupportedTokens,\n    getUserBalances,\n    getSupportedMarkets,\n    logout,\n} from \"../../actions/loopring\";\nimport { Flex, Box } from \"reflexbox\";\nimport { Swapper } from \"../swapper\";\nimport { FullScreenOverlay } from \"../../components/full-screen-overlay\";\nimport moment from \"moment\";\nimport momentIt from \"moment/locale/it\";\nimport { IntlProvider } from \"react-intl\";\nimport en from \"../../i18n/messages/en.json\";\nimport it from \"../../i18n/messages/it.json\";\nimport { switchLanguage } from \"../../actions/i18n\";\nimport BrowserGlobalStyles from \"../../BrowserGlobalStyles\";\n\n// setting up moment locales\nmoment.locale(\"it\", momentIt);\nconst localizedMessages = { en, it };\n\nconst commonColors = {\n    error: \"#c62828\",\n    warning: \"#FF6F00\",\n    primary: \"#1c60ff\",\n    success: \"#00c853\",\n    disabled: \"rgb(202, 209, 213)\",\n    textDisabled: \"rgba(5, 5, 5, 0.565)\",\n    textButton: \"#d6e0ff\",\n};\n\nconst light = {\n    ...commonColors,\n    background: \"#edf2f7\",\n    foreground: \"#dfe6ef\",\n    border: \"#b9ccdf\",\n    textLight: \"#999999\",\n    text: \"#0e062d\",\n    textInverted: \"#F1F9D2\",\n    shadow: \"rgba(0, 0, 0, 0.4)\",\n    placeholder: \"#999999\"\n};\n\nconst dark = {\n    ...commonColors,\n    background: \"#151618\",\n    foreground: \"rgba(0, 0, 0, .65)\",\n    border: \"#23262a\",\n    textLight: \"#737373\",\n    text: \"#F1F9D2\",\n    textInverted: \"#0e062d\",\n    shadow: \"rgba(255, 255, 255, 0.1)\",\n    placeholder: \"#737373\"\n};\n\nconst lightWeb3ModalTheme = {\n    background: light.background,\n    main: light.text,\n    secondary: light.text,\n    hover: light.foreground,\n};\n\nconst darkWeb3ModalTheme = {\n    background: dark.background,\n    main: dark.text,\n    secondary: dark.text,\n    hover: dark.foreground,\n};\n\nconst web3ModalOptions = {\n    cacheProvider: false,\n    providerOptions: {\n        mewconnect: {\n            package: MewConnect,\n            options: {\n                infuraId: INFURA_URL,\n            },\n        },\n    },\n};\n\nexport const getWeb3Modal = () => new Web3Modal(web3ModalOptions);\n\nexport let selectedTheme = light;\n\nexport const App = () => {\n\n    const dispatch = useDispatch();\n\n    const {\n        selectedLanguage,\n        web3Instance,\n        selectedAccount: selectedWeb3Account,\n        loopringAccount,\n        loopringWallet,\n        supportedTokens,\n        supportedMarkets,\n    } = useSelector((state) => ({\n        selectedLanguage: state.i18n.selectedLanguage,\n        web3Instance: state.web3.instance,\n        selectedAccount: state.web3.selectedAccount,\n        loopringAccount: state.loopring.account,\n        loopringWallet: state.loopring.wallet,\n        supportedTokens: state.loopring.supportedTokens.data,\n        supportedMarkets: state.loopring.supportedMarkets.data,\n    }));\n\n    const [lightTheme, setLightTheme] = useState(true);\n    const [drawerOpen, setDrawerOpen] = useState(false);\n\n    useEffect(() => {\n        dispatch(getSupportedMarkets());\n    }, [dispatch]);\n\n    useEffect(() => {\n        if (supportedMarkets && supportedMarkets.length > 0) {\n            dispatch(getSupportedTokens(supportedMarkets));\n        }\n    }, [dispatch, supportedMarkets]);\n\n    useEffect(() => {\n        if (loopringAccount && loopringWallet && supportedTokens) {\n            dispatch(\n                getUserBalances(\n                    loopringAccount,\n                    loopringWallet,\n                    supportedTokens\n                )\n            );\n        }\n    }, [dispatch, loopringAccount, loopringWallet, supportedTokens]);\n\n    // setting up local storage-saved theme\n    useEffect(() => {\n        const cachedTheme =\n            localStorage.getItem(\"loopring-swap-theme\") || \"light\";\n        const lightTheme = cachedTheme === \"light\";\n        setLightTheme(lightTheme);\n        web3ModalOptions.theme = lightTheme\n            ? lightWeb3ModalTheme\n            : darkWeb3ModalTheme;\n    }, [dispatch]);\n\n    // setting up local storage-saved language\n    useEffect(() => {\n        const cachedLanguage = localStorage.getItem(\"loopring-swap-language\");\n        if (cachedLanguage && cachedLanguage in localizedMessages) {\n            dispatch(switchLanguage(cachedLanguage));\n        }\n    }, [dispatch]);\n\n    const handleDrawerOpenClick = useCallback(() => {\n        setDrawerOpen(true);\n    }, []);\n\n    const handleDrawerClose = useCallback(() => {\n        setDrawerOpen(false);\n    }, []);\n\n    const handleConnectWallet = useCallback(() => {\n        dispatch(initializeWeb3());\n    }, [dispatch]);\n\n    const handleLogin = useCallback(() => {\n        dispatch(login(web3Instance, selectedWeb3Account));\n    }, [dispatch, selectedWeb3Account, web3Instance]);\n\n    const handleLogout = useCallback(() => {\n        dispatch(logout());\n    }, [dispatch]);\n\n    const handleOverlayClick = useCallback(() => {\n        setDrawerOpen(false);\n    }, []);\n\n    const handleThemeChange = useCallback(() => {\n        const newLightTheme = !lightTheme;\n        const textTheme = newLightTheme ? \"light\" : \"dark\";\n        localStorage.setItem(\"loopring-swap-theme\", textTheme);\n        web3ModalOptions.theme = newLightTheme\n            ? lightWeb3ModalTheme\n            : darkWeb3ModalTheme;\n        setLightTheme(newLightTheme);\n        selectedTheme = newLightTheme ? light : dark;\n    }, [lightTheme]);\n\n    const handleSelectedLanguageChange = useCallback(\n        (language) => {\n            localStorage.setItem(\"loopring-swap-language\", language);\n            dispatch(switchLanguage(language));\n        },\n        [dispatch]\n    );\n\n    return (\n        <IntlProvider\n            locale={selectedLanguage}\n            messages={localizedMessages[selectedLanguage]}\n        >\n        <BrowserGlobalStyles/>\n            <ThemeProvider theme={lightTheme ? light : dark}>\n                <GlobalStyle />\n                <Layout\n                    onDrawerOpenClick={handleDrawerOpenClick}\n                    selectedWeb3Account={selectedWeb3Account}\n                    loggedIn={!!loopringAccount}\n                >\n                    <Flex\n                        width=\"100%\"\n                        height=\"100%\"\n                        justifyContent=\"center\"\n                        alignItems=\"center\"\n                    >\n                        <Box width={[\"90%\", \"60%\", \"50%\", \"24%\"]}>\n                            <Swapper\n                                onConnectWalletClick={handleDrawerOpenClick}\n                            />\n                        </Box>\n                    </Flex>\n                </Layout>\n                <FullScreenOverlay\n                    open={drawerOpen}\n                    onClick={handleOverlayClick}\n                />\n                <Drawer\n                    open={drawerOpen}\n                    onClose={handleDrawerClose}\n                    onConnectWallet={handleConnectWallet}\n                    selectedWeb3Account={selectedWeb3Account}\n                    onLogin={handleLogin}\n                    onLogout={handleLogout}\n                    loggedIn={!!loopringAccount}\n                    darkTheme={!lightTheme}\n                    onDarkThemeChange={handleThemeChange}\n                    selectedLanguage={selectedLanguage}\n                    onSelectedLanguageChange={handleSelectedLanguageChange}\n                />\n                <ToastContainer\n                    className=\"custom-toast-root\"\n                    toastClassName=\"custom-toast-container\"\n                    bodyClassName=\"custom-toast-body\"\n                    position=\"top-right\"\n                    closeButton={false}\n                    transition={Slide}\n                    limit={3}\n                />\n            </ThemeProvider>\n        </IntlProvider>\n    );\n};\n","import { getWeb3Modal } from \"../../views/app\";\nimport Web3 from \"web3\";\n\nexport const INITIALIZE_WEB3_SUCCESS = \"INITIALIZE_WEB3_SUCCESS\";\nexport const WEB3_ACCOUNT_CHANGED = \"WEB3_ACCOUNT_CHANGED\";\n\nexport const initializeWeb3 = () => async (dispatch) => {\n    try {\n        const web3Modal = getWeb3Modal();\n        const provider = await web3Modal.connect();\n        provider.on(\"accountsChanged\", (accounts) => {\n            if (accounts.length > 0) {\n                dispatch({\n                    type: WEB3_ACCOUNT_CHANGED,\n                    selectedAccount: accounts[0],\n                });\n            }\n        });\n        provider.autoRefreshOnNetworkChange = false;\n        const web3 = new Web3(provider);\n        const accounts = await web3.eth.getAccounts();\n        dispatch({\n            type: INITIALIZE_WEB3_SUCCESS,\n            web3,\n            selectedAccount: accounts[0],\n        });\n    } catch (error) {\n        console.error(\"error initializing web3\", error);\n    }\n};\n","import {\n    INITIALIZE_WEB3_SUCCESS,\n    WEB3_ACCOUNT_CHANGED,\n} from \"../../actions/web3\";\n\nconst initialState = {\n    instance: null,\n    selectedAccount: \"\",\n};\n\nexport const web3Reducer = (state = initialState, action) => {\n    const { type } = action;\n    switch (type) {\n        case INITIALIZE_WEB3_SUCCESS: {\n            return {\n                ...state,\n                instance: action.web3,\n                selectedAccount: action.selectedAccount,\n            };\n        }\n        case WEB3_ACCOUNT_CHANGED: {\n            return { ...state, selectedAccount: action.selectedAccount };\n        }\n        default: {\n            return state;\n        }\n    }\n};\n","import {\n    LOGIN_SUCCESS,\n    GET_SUPPORTED_TOKENS_SUCCESS,\n    GET_SUPPORTED_TOKENS_START,\n    GET_SUPPORTED_TOKENS_END,\n    GET_USER_BALANCES_SUCCESS,\n    GET_USER_BALANCES_START,\n    GET_USER_BALANCES_END,\n    GET_SWAP_DATA_START,\n    GET_SWAP_DATA_END,\n    GET_SWAP_DATA_SUCCESS,\n    GET_SUPPORTED_MARKETS_START,\n    GET_SUPPORTED_MARKETS_END,\n    GET_SUPPORTED_MARKETS_SUCCESS,\n    POST_SWAP_START,\n    POST_SWAP_END,\n    LOGOUT,\n} from \"../../actions/loopring\";\n\nconst initialState = {\n    account: null,\n    wallet: null,\n    exchange: null,\n    supportedTokens: {\n        loadings: 0,\n        data: [],\n    },\n    supportedMarkets: {\n        loadings: 0,\n        data: [],\n    },\n    balances: {\n        loadings: 0,\n        data: [],\n    },\n    swap: {\n        loadings: 0,\n        data: {},\n    },\n    swapSubmission: {\n        loadings: 0,\n    },\n};\n\nexport const loopringReducer = (state = initialState, action) => {\n    const { type } = action;\n    switch (type) {\n        case LOGIN_SUCCESS: {\n            return {\n                ...state,\n                account: action.account,\n                wallet: action.wallet,\n                exchange: action.exchange,\n            };\n        }\n        case GET_SUPPORTED_TOKENS_START: {\n            return {\n                ...state,\n                supportedTokens: {\n                    ...state.supportedTokens,\n                    loadings: state.supportedTokens.loadings + 1,\n                },\n            };\n        }\n        case GET_SUPPORTED_TOKENS_END: {\n            return {\n                ...state,\n                supportedTokens: {\n                    ...state.supportedTokens,\n                    loadings: state.supportedTokens.loadings - 1,\n                },\n            };\n        }\n        case GET_SUPPORTED_TOKENS_SUCCESS: {\n            return {\n                ...state,\n                supportedTokens: {\n                    ...state.supportedTokens,\n                    data: action.supportedTokens,\n                },\n            };\n        }\n        case GET_SUPPORTED_MARKETS_START: {\n            return {\n                ...state,\n                supportedMarkets: {\n                    ...state.supportedMarkets,\n                    loadings: state.supportedMarkets.loadings + 1,\n                },\n            };\n        }\n        case GET_SUPPORTED_MARKETS_END: {\n            return {\n                ...state,\n                supportedMarkets: {\n                    ...state.supportedMarkets,\n                    loadings: state.supportedMarkets.loadings - 1,\n                },\n            };\n        }\n        case GET_SUPPORTED_MARKETS_SUCCESS: {\n            return {\n                ...state,\n                supportedMarkets: {\n                    ...state.supportedMarkets,\n                    data: action.supportedMarkets,\n                },\n            };\n        }\n        case GET_USER_BALANCES_START: {\n            return {\n                ...state,\n                balances: {\n                    ...state.balances,\n                    loadings: state.balances.loadings + 1,\n                },\n            };\n        }\n        case GET_USER_BALANCES_END: {\n            return {\n                ...state,\n                balances: {\n                    ...state.balances,\n                    loadings: state.balances.loadings - 1,\n                },\n            };\n        }\n        case GET_USER_BALANCES_SUCCESS: {\n            return {\n                ...state,\n                balances: {\n                    ...state.balances,\n                    data: action.balances,\n                },\n            };\n        }\n        case GET_SWAP_DATA_START: {\n            return {\n                ...state,\n                swap: {\n                    ...state.swap,\n                    loadings: state.swap.loadings + 1,\n                },\n            };\n        }\n        case GET_SWAP_DATA_END: {\n            return {\n                ...state,\n                swap: {\n                    ...state.swap,\n                    loadings: state.swap.loadings - 1,\n                },\n            };\n        }\n        case GET_SWAP_DATA_SUCCESS: {\n            return {\n                ...state,\n                swap: {\n                    ...state.swap,\n                    data: {\n                        averageFillPrice: action.averageFillPrice,\n                        slippagePercentage: action.slippagePercentage,\n                        maximumAmount: action.maximumAmount,\n                    },\n                },\n            };\n        }\n        case POST_SWAP_START: {\n            return {\n                ...state,\n                swapSubmission: {\n                    ...state.swapSubmission,\n                    loadings: state.swapSubmission.loadings + 1,\n                },\n            };\n        }\n        case POST_SWAP_END: {\n            return {\n                ...state,\n                swapSubmission: {\n                    ...state.swapSubmission,\n                    loadings: state.swapSubmission.loadings - 1,\n                },\n            };\n        }\n        case LOGOUT: {\n            return { ...state, account: null, wallet: null, exchange: null };\n        }\n        default: {\n            return state;\n        }\n    }\n};\n","import { SWITCH_LANGUAGE } from \"../../actions/i18n\";\n\nconst initialState = {\n    selectedLanguage: \"en\",\n};\n\nexport const i18nReducer = (state = initialState, action) => {\n    const { type } = action;\n    switch (type) {\n        case SWITCH_LANGUAGE: {\n            return {\n                ...state,\n                selectedLanguage: action.language,\n            };\n        }\n        default: {\n            return state;\n        }\n    }\n};\n","import { combineReducers } from \"redux\";\nimport { web3Reducer } from \"./web3\";\nimport { loopringReducer } from \"./loopring\";\nimport { i18nReducer } from \"./i18n\";\n\nexport const reducers = combineReducers({\n    web3: web3Reducer,\n    loopring: loopringReducer,\n    i18n: i18nReducer,\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { App } from \"./views/app\";\nimport { Provider } from \"react-redux\";\nimport { createStore, compose, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { reducers } from \"./reducers\";\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunk)));\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById(\"root\")\n);\n","// Taken from\n// https://github.com/iden3/circomlib\n\nimport { bigInt, bn128 } from \"snarkjs\";\nimport blake2b from \"blake2b\";\nconst assert = require(\"assert\");\n\nconst F = bn128.Fr;\nconst SEED = \"poseidon\";\nconst NROUNDSF = 8;\nconst NROUNDSP = 57;\nconst T = 6;\n\nfunction getPseudoRandom(seed, n) {\n  const res = [];\n  let input = Buffer.from(seed);\n  let h = blake2b(32).update(input).digest();\n  while (res.length < n) {\n    const n = F.affine(bigInt.leBuff2int(h));\n    res.push(n);\n    h = blake2b(32).update(h).digest();\n  }\n\n  return res;\n}\n\nfunction allDifferent(v) {\n  for (let i = 0; i < v.length; i++) {\n    if (v[i].isZero()) return false;\n    for (let j = i + 1; j < v.length; j++) {\n      if (v[i].equals(v[j])) return false;\n    }\n  }\n  return true;\n}\n\nexport function getMatrix(t, seed, nRounds) {\n  if (typeof seed === \"undefined\") seed = SEED;\n  if (typeof nRounds === \"undefined\") nRounds = NROUNDSF + NROUNDSP;\n  if (typeof t === \"undefined\") t = T;\n  let nonce = \"0000\";\n  let cmatrix = getPseudoRandom(seed + \"_matrix_\" + nonce, t * 2);\n  while (!allDifferent(cmatrix)) {\n    nonce = Number(nonce) + 1 + \"\";\n    while (nonce.length < 4) nonce = \"0\" + nonce;\n    cmatrix = getPseudoRandom(seed + \"_matrix_\" + nonce, t * 2);\n  }\n\n  const M = new Array(t);\n  for (let i = 0; i < t; i++) {\n    M[i] = new Array(t);\n    for (let j = 0; j < t; j++) {\n      M[i][j] = F.affine(F.inverse(F.sub(cmatrix[i], cmatrix[t + j])));\n    }\n  }\n  return M;\n}\n\nexport function getConstants(t, seed, nRounds) {\n  if (typeof seed === \"undefined\") seed = SEED;\n  if (typeof nRounds === \"undefined\") nRounds = NROUNDSF + NROUNDSP;\n  if (typeof t === \"undefined\") t = T;\n  return getPseudoRandom(seed + \"_constants\", nRounds);\n}\n\nfunction ark(state, c) {\n  for (let j = 0; j < state.length; j++) {\n    state[j] = F.add(state[j], c);\n  }\n}\n\nfunction sigma(a) {\n  return F.mul(a, F.square(F.square(a, a)));\n}\n\nfunction mix(state, M) {\n  const newState = new Array(state.length);\n  for (let i = 0; i < state.length; i++) {\n    newState[i] = F.zero;\n    for (let j = 0; j < state.length; j++) {\n      newState[i] = F.add(newState[i], F.mul(M[i][j], state[j]));\n    }\n  }\n  for (let i = 0; i < state.length; i++) state[i] = newState[i];\n}\n\nexport function createHash(t, nRoundsF, nRoundsP, seed) {\n  if (typeof seed === \"undefined\") seed = SEED;\n  if (typeof nRoundsF === \"undefined\") nRoundsF = NROUNDSF;\n  if (typeof nRoundsP === \"undefined\") nRoundsP = NROUNDSP;\n  if (typeof t === \"undefined\") t = T;\n\n  assert(nRoundsF % 2 === 0);\n  const C = getConstants(t, seed, nRoundsF + nRoundsP);\n  const M = getMatrix(t, seed, nRoundsF + nRoundsP);\n  return function (inputs) {\n    let state = [];\n    assert(inputs.length < t);\n    assert(inputs.length > 0);\n    for (let i = 0; i < inputs.length; i++) state[i] = bigInt(inputs[i]);\n    for (let i = inputs.length; i < t; i++) state[i] = F.zero;\n\n    for (let i = 0; i < nRoundsF + nRoundsP; i++) {\n      ark(state, C[i]);\n      if (i < nRoundsF / 2 || i >= nRoundsF / 2 + nRoundsP) {\n        for (let j = 0; j < t; j++) state[j] = sigma(state[j]);\n      } else {\n        state[0] = sigma(state[0]);\n      }\n      mix(state, M);\n    }\n    return F.affine(state[0]);\n  };\n}\n","import { bigInt, bn128 } from \"snarkjs\";\n\nconst Base8 = [\n  bigInt(\n    \"16540640123574156134436876038791482806971768689494387082833631921987005038935\"\n  ),\n  bigInt(\n    \"20819045374670962167435360035096875258406992893633759881276124905556507972311\"\n  ),\n];\nconst order = bigInt(\n  \"21888242871839275222246405745257275088614511777268538073601725287587578984328\"\n);\nconst subOrder = order.shr(3);\nconst p = bn128.r;\n\nfunction addPoint(a, b) {\n  const q = bn128.r;\n  const cta = bigInt(\"168700\");\n  const d = bigInt(\"168696\");\n  const res = [];\n\n  res[0] = bigInt(\n    bigInt(a[0])\n      .mul(b[1])\n      .add(bigInt(b[0]).mul(a[1]))\n      .mul(\n        bigInt(\n          bigInt(\"1\").add(d.mul(a[0]).mul(b[0]).mul(a[1]).mul(b[1]))\n        ).inverse(q)\n      )\n  ).affine(q);\n  res[1] = bigInt(\n    bigInt(a[1])\n      .mul(b[1])\n      .sub(cta.mul(a[0]).mul(b[0]))\n      .mul(\n        bigInt(\n          bigInt(\"1\").sub(d.mul(a[0]).mul(b[0]).mul(a[1]).mul(b[1]))\n        ).inverse(q)\n      )\n  ).affine(q);\n\n  return res;\n}\n\nfunction mulPointEscalar(base, e) {\n  let res = [bigInt(\"0\"), bigInt(\"1\")];\n  let rem = bigInt(e);\n  let exp = base;\n\n  while (!rem.isZero()) {\n    if (rem.isOdd()) {\n      res = addPoint(res, exp);\n    }\n    exp = addPoint(exp, exp);\n    rem = rem.shr(1);\n  }\n\n  return res;\n}\n\nfunction inSubgroup(P) {\n  if (!inCurve(P)) return false;\n  const res = mulPointEscalar(P, exports.subOrder);\n  return res[0].equals(bigInt(0)) && res[1].equals(bigInt(1));\n}\n\nfunction inCurve(P) {\n  const F = bn128.Fr;\n\n  const a = bigInt(\"168700\");\n  const d = bigInt(\"168696\");\n\n  const x2 = F.square(P[0]);\n  const y2 = F.square(P[1]);\n\n  if (!F.equals(F.add(F.mul(a, x2), y2), F.add(F.one, F.mul(F.mul(x2, y2), d))))\n    return false;\n\n  return true;\n}\n\nfunction packPoint(P) {\n  const buff = bigInt.leInt2Buff(P[1], 32);\n  if (P[0].greater(exports.p.shr(1))) {\n    buff[31] = buff[31] | 0x80;\n  }\n  return buff;\n}\n\nfunction unpackPoint(_buff) {\n  const F = bn128.Fr;\n\n  const buff = Buffer.from(_buff);\n  let sign = false;\n  const P = new Array(2);\n  if (buff[31] & 0x80) {\n    sign = true;\n    buff[31] = buff[31] & 0x7f;\n  }\n  P[1] = bigInt.leBuff2int(buff);\n  if (P[1].greaterOrEquals(exports.p)) return null;\n\n  const a = bigInt(\"168700\");\n  const d = bigInt(\"168696\");\n\n  const y2 = F.square(P[1]);\n\n  let x = F.sqrt(F.div(F.sub(F.one, y2), F.sub(a, F.mul(d, y2))));\n\n  if (x == null) return null;\n\n  if (sign) x = F.neg(x);\n\n  P[0] = F.affine(x);\n\n  return P;\n}\n\nexport default {\n  addPoint,\n  mulPointEscalar,\n  inCurve,\n  inSubgroup,\n  packPoint,\n  unpackPoint,\n  Base8,\n  order,\n  subOrder,\n  p,\n};\n","module.exports = __webpack_public_path__ + \"static/media/logo.22ea6816.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/nest.6de5a91a.png\";","module.exports = __webpack_public_path__ + \"static/media/pnetwork.970c7ce6.png\";","// Taken and modified from\n// https://github.com/iden3/circomlib\n\nimport { bigInt } from \"snarkjs\";\nimport { createHash } from \"./poseidon\";\n\nimport babyJub from \"./babyjub\";\nimport createBlakeHash from \"blake-hash\";\n\nfunction generateKeyPair(seed) {\n  const secretKey = bigInt.leBuff2int(seed).mod(babyJub.subOrder);\n  const publicKey = babyJub.mulPointEscalar(babyJub.Base8, secretKey);\n  return {\n    publicKeyX: publicKey[0].toString(10),\n    publicKeyY: publicKey[1].toString(10),\n    secretKey: secretKey.toString(10),\n  };\n}\n\nfunction generatePubKeyFromPrivate(secretKey) {\n  const publicKey = babyJub.mulPointEscalar(babyJub.Base8, bigInt(secretKey));\n  return {\n    publicKeyX: publicKey[0].toString(10),\n    publicKeyY: publicKey[1].toString(10),\n  };\n}\n\nfunction sign(strKey, msg) {\n  const key = bigInt(strKey);\n  const prv = bigInt.leInt2Buff(key, 32);\n\n  const h1 = createBlakeHash(\"blake512\").update(prv).digest();\n  const msgBuff = bigInt.leInt2Buff(bigInt(msg), 32);\n  const rBuff = createBlakeHash(\"blake512\")\n    .update(Buffer.concat([h1.slice(32, 64), msgBuff]))\n    .digest();\n  let r = bigInt.leBuff2int(rBuff);\n  r = r.mod(babyJub.subOrder);\n\n  const A = babyJub.mulPointEscalar(babyJub.Base8, key);\n  const R8 = babyJub.mulPointEscalar(babyJub.Base8, r);\n\n  const hasher = createHash(6, 6, 52);\n  const hm = hasher([R8[0], R8[1], A[0], A[1], msg]);\n  const S = r.add(hm.mul(key)).mod(babyJub.subOrder);\n\n  return {\n    Rx: R8[0].toString(),\n    Ry: R8[1].toString(),\n    s: S.toString(),\n  };\n}\n\nfunction verify(msg, sig, pubKey) {\n  const A = [bigInt(pubKey[0]), bigInt(pubKey[1])];\n  const R = [bigInt(sig.Rx), bigInt(sig.Ry)];\n  const S = bigInt(sig.s);\n\n  // Check parameters\n  if (!babyJub.inCurve(R)) return false;\n  if (!babyJub.inCurve(A)) return false;\n  if (S >= babyJub.subOrder) return false;\n\n  const hasher = createHash(6, 6, 52);\n  const hm = hasher([R[0], R[1], A[0], A[1], bigInt(msg)]);\n\n  const Pleft = babyJub.mulPointEscalar(babyJub.Base8, S);\n  let Pright = babyJub.mulPointEscalar(A, hm);\n  Pright = babyJub.addPoint(R, Pright);\n\n  if (!Pleft[0].equals(Pright[0])) return false;\n  if (!Pleft[1].equals(Pright[1])) return false;\n\n  return true;\n}\n\nexport default {\n  generateKeyPair,\n  sign,\n  verify,\n  generatePubKeyFromPrivate,\n};\n"],"sourceRoot":""}